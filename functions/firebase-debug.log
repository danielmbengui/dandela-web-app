[debug] [2023-01-06T08:28:29.414Z] ----------------------------------------------------------------------
[debug] [2023-01-06T08:28:29.414Z] Command:       /usr/local/bin/node /usr/local/bin/firebase emulators:start
[debug] [2023-01-06T08:28:29.415Z] CLI Version:   11.19.0
[debug] [2023-01-06T08:28:29.415Z] Platform:      darwin
[debug] [2023-01-06T08:28:29.415Z] Node Version:  v16.17.1
[debug] [2023-01-06T08:28:29.418Z] Time:          Fri Jan 06 2023 09:28:29 GMT+0100 (heure normale d’Europe centrale)
[debug] [2023-01-06T08:28:29.418Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-01-06T08:28:29.453Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-01-06T08:28:29.453Z] > authorizing via signed-in user (daniel.mbengui@gmail.com)
[debug] [2023-01-06T08:28:29.744Z] java version "19.0.1" 2022-10-18

[debug] [2023-01-06T08:28:29.745Z] Java(TM) SE Runtime Environment (build 19.0.1+10-21)
Java HotSpot(TM) 64-Bit Server VM (build 19.0.1+10-21, mixed mode, sharing)

[debug] [2023-01-06T08:28:29.747Z] Parsed Java major version: 19
[info] i  emulators: Starting emulators: functions, firestore {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions, firestore"}}
[debug] [2023-01-06T08:28:29.984Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-01-06T08:28:29.984Z] [firestore] Firestore Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-01-06T08:28:29.984Z] [firestore.websocket] websocket server for firestore only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-01-06T08:28:29.984Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2023-01-06T08:28:29.988Z] [hub] writing locator at /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/hub-dandelawebapp.json
[debug] [2023-01-06T08:28:30.086Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-01-06T08:28:30.086Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-01-06T08:28:30.086Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: auth, database, hosting, pubsub, storage {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mauth, database, hosting, pubsub, storage\u001b[22m"}}
[info] ✔  functions: Using node@16 from host. {"metadata":{"emulator":{"name":"functions"},"message":"Using node@16 from host."}}
[debug] [2023-01-06T08:28:30.093Z] defaultcredentials: writing to file /Users/couzmec/.config/firebase/daniel_mbengui_gmail.com_application_default_credentials.json
[debug] [2023-01-06T08:28:30.094Z] Setting GAC to /Users/couzmec/.config/firebase/daniel_mbengui_gmail.com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/couzmec/.config/firebase/daniel_mbengui_gmail.com_application_default_credentials.json"}}
[debug] [2023-01-06T08:28:30.095Z] > refreshing access token with scopes: []
[debug] [2023-01-06T08:28:30.095Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2023-01-06T08:28:30.095Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-01-06T08:28:30.186Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2023-01-06T08:28:30.187Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-01-06T08:28:30.196Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/dandelawebapp/adminSdkConfig [none]
[debug] [2023-01-06T08:28:30.459Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/dandelawebapp/adminSdkConfig 200
[debug] [2023-01-06T08:28:30.459Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/dandelawebapp/adminSdkConfig {"projectId":"dandelawebapp","storageBucket":"dandelawebapp.appspot.com","locationId":"europe-west"}
[debug] [2023-01-06T08:28:30.484Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-01-06T08:28:30.484Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2023-01-06T08:28:30.484Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","/Users/couzmec/.cache/firebase/emulators/cloud-firestore-emulator-v1.15.1.jar","--host","127.0.0.1","--port",8080,"--websocket_port",9150,"--project_id","dandelawebapp","--rules","/Users/couzmec/DANDELA/dandela-web-app/firestore.rules","--single_project_mode",true,"--functions_emulator","127.0.0.1:5001"],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"/Users/couzmec/.cache/firebase/emulators/cloud-firestore-emulator-v1.15.1.jar\",\"--host\",\"127.0.0.1\",\"--port\",8080,\"--websocket_port\",9150,\"--project_id\",\"dandelawebapp\",\"--rules\",\"/Users/couzmec/DANDELA/dandela-web-app/firestore.rules\",\"--single_project_mode\",true,\"--functions_emulator\",\"127.0.0.1:5001\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[debug] [2023-01-06T08:28:31.167Z] Jan 06, 2023 9:28:31 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start
INFO: Started WebSocket server on ws://127.0.0.1:9150
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:28:31 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start\nINFO: Started WebSocket server on ws://127.0.0.1:9150\n"}}
[debug] [2023-01-06T08:28:31.176Z] API endpoint: http:// {"metadata":{"emulator":{"name":"firestore"},"message":"API endpoint: http://"}}
[debug] [2023-01-06T08:28:31.177Z] 127.0.0.1:8080
If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST=127.0.0.1:8080

Dev App Server is now running.

 {"metadata":{"emulator":{"name":"firestore"},"message":"127.0.0.1:8080\nIf you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:\n\n   export FIRESTORE_EMULATOR_HOST=127.0.0.1:8080\n\nDev App Server is now running.\n\n"}}
[info] ✔  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[debug] [2023-01-06T08:28:31.252Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-01-06T08:28:31.252Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-01-06T08:28:31.252Z] Starting Emulator UI with command {"binary":"node","args":["/Users/couzmec/.cache/firebase/emulators/ui-v1.11.1/server/server.js"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"/Users/couzmec/.cache/firebase/emulators/ui-v1.11.1/server/server.js\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2023-01-06T08:28:31.320Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[debug] [2023-01-06T08:28:31.320Z] Web / API server started at ::1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4000\n"}}
[info] i  functions: Watching "/Users/couzmec/DANDELA/dandela-web-app/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/couzmec/DANDELA/dandela-web-app/functions\" for Cloud Functions..."}}
[debug] [2023-01-06T08:28:31.513Z] Validating nodejs source
[debug] [2023-01-06T08:28:31.857Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:28:31.857Z] Building nodejs source
[debug] [2023-01-06T08:28:31.858Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:28:32.006Z] Serving at port 9005

[debug] [2023-01-06T08:28:33.196Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:28:33.200Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:28:33.204Z] addFirestoreTrigger "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/{userId}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2023-01-06T08:28:33.204Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 [none]
[debug] [2023-01-06T08:28:33.204Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/{userId}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2023-01-06T08:28:33.207Z] Jan 06, 2023 9:28:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:28:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:28:33.282Z] Jan 06, 2023 9:28:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:28:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:28:33.497Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 200
[debug] [2023-01-06T08:28:33.497Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 {}
[info] ✔  functions[us-central1-updateTokenUser]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[debug] [2023-01-06T08:28:33.498Z] addFirestoreTrigger "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2023-01-06T08:28:33.498Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/dandelawebapp/triggers/us-central1-createTransfer-0 [none]
[debug] [2023-01-06T08:28:33.498Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/dandelawebapp/triggers/us-central1-createTransfer-0 "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2023-01-06T08:28:33.499Z] Jan 06, 2023 9:28:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:28:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:28:33.503Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/dandelawebapp/triggers/us-central1-createTransfer-0 200
[debug] [2023-01-06T08:28:33.503Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/dandelawebapp/triggers/us-central1-createTransfer-0 {}
[info] ✔  functions[us-central1-createTransfer]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[info] ✔  functions[us-central1-addMessage]: http function initialized (http://127.0.0.1:5001/dandelawebapp/us-central1/addMessage). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/dandelawebapp/us-central1/addMessage)."}}
[debug] [2023-01-06T08:28:33.503Z] addFirestoreTrigger "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2023-01-06T08:28:33.503Z] >>> [apiv2][query] PUT http://127.0.0.1:8080/emulator/v1/projects/dandelawebapp/triggers/us-central1-makeUppercase-0 [none]
[debug] [2023-01-06T08:28:33.503Z] >>> [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/dandelawebapp/triggers/us-central1-makeUppercase-0 "{\"eventTrigger\":{\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2023-01-06T08:28:33.505Z] Jan 06, 2023 9:28:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:28:33 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:28:33.508Z] <<< [apiv2][status] PUT http://127.0.0.1:8080/emulator/v1/projects/dandelawebapp/triggers/us-central1-makeUppercase-0 200
[debug] [2023-01-06T08:28:33.508Z] <<< [apiv2][body] PUT http://127.0.0.1:8080/emulator/v1/projects/dandelawebapp/triggers/us-central1-makeUppercase-0 {}
[info] ✔  functions[us-central1-makeUppercase]: firestore function initialized. {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mfirestore\u001b[22m function initialized."}}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
├───────────┼────────────────┼─────────────────────────────────┤
│ Firestore │ 127.0.0.1:8080 │ http://127.0.0.1:4000/firestore │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500, 9150

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2023-01-06T08:33:37.482Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:33:38.488Z] Validating nodejs source
[debug] [2023-01-06T08:33:38.835Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:33:38.836Z] Building nodejs source
[debug] [2023-01-06T08:33:38.836Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:33:38.936Z] Serving at port 9005

[debug] [2023-01-06T08:33:40.112Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:33:40.114Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:33:41.382Z] Jan 06, 2023 9:33:41 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:33:41 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2023-01-06T08:33:54.260Z] Jan 06, 2023 9:33:54 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:33:54 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2023-01-06T08:33:54.262Z] Jan 06, 2023 9:33:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:33:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:33:54.281Z] Jan 06, 2023 9:33:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:33:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:33:54.412Z] Jan 06, 2023 9:33:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:33:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:33:54.446Z] Jan 06, 2023 9:33:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:33:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:34:08.070Z] Jan 06, 2023 9:34:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Jan 06, 2023 9:34:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:34:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nJan 06, 2023 9:34:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:34:31.371Z] Jan 06, 2023 9:34:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:34:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:34:31.399Z] Jan 06, 2023 9:34:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:34:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:34:31.404Z] Jan 06, 2023 9:34:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:34:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:34:31.487Z] Jan 06, 2023 9:34:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:34:31 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:34:45.455Z] Jan 06, 2023 9:34:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:34:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:34:45.479Z] Jan 06, 2023 9:34:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:34:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:34:45.507Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:34:45.507Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:34:45.507Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:34:45.507Z"],"workRunningCount":1}
[debug] [2023-01-06T08:34:45.508Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:34:45.511Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:34:45.511Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:34:45.518Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:34:45.518Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:34:46.073Z] [runtime-status] [2240] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:34:46.073Z] [runtime-status] [2240] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:34:46.073Z] [runtime-status] [2240] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:34:46.073Z] [runtime-status] [2240] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:34:46.170Z] [runtime-status] [2240] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:34:46.171Z] [runtime-status] [2240] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:34:46.171Z] [runtime-status] [2240] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:34:46.171Z] [runtime-status] [2240] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:34:46.172Z] [runtime-status] [2240] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:34:46.172Z] [runtime-status] [2240] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:34:46.173Z] [runtime-status] [2240] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:34:46.178Z] [runtime-status] [2240] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:34:46.179Z] [runtime-status] [2240] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_fbca6721176d93d8.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_fbca6721176d93d8.sock"}}
[debug] [2023-01-06T08:34:46.232Z] [worker-us-central1-updateTokenUser-74ab74b3-c78c-4b9a-a4e6-4cf580eaff5a]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-74ab74b3-c78c-4b9a-a4e6-4cf580eaff5a]: IDLE"}}
[debug] [2023-01-06T08:34:46.232Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:34:46.232Z] [worker-us-central1-updateTokenUser-74ab74b3-c78c-4b9a-a4e6-4cf580eaff5a]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-74ab74b3-c78c-4b9a-a4e6-4cf580eaff5a]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:34:46.240Z] [runtime-status] [2240] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:34:46.240Z] [runtime-status] [2240] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","fields":{"uid":{"stringValue":"7BDcCsXJCyVV6V5EXgE4"},"tokens":{"arrayValue":{"values":[{"stringValue":"fjkldsnfjkldafnks"},{"stringValue":"alalalalalala"}]}}},"createTime":"2023-01-06T08:34:31.452001Z","updateTime":"2023-01-06T08:34:45.475522Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","fields":{"uid":{"stringValue":"7BDcCsXJCyVV6V5EXgE4"},"tokens":{"arrayValue":{"values":[{"stringValue":"fjkldsnfjkldafnks"}]}}},"createTime":"2023-01-06T08:34:31.452001Z","updateTime":"2023-01-06T08:34:31.452001Z"},"updateMask":{}},"context":{"eventId":"27e148bc-8d47-4906-ac7b-2c897e25d0d3","timestamp":"2023-01-06T08:34:45.475Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2240] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"fields\":{\"uid\":{\"stringValue\":\"7BDcCsXJCyVV6V5EXgE4\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"fjkldsnfjkldafnks\"},{\"stringValue\":\"alalalalalala\"}]}}},\"createTime\":\"2023-01-06T08:34:31.452001Z\",\"updateTime\":\"2023-01-06T08:34:45.475522Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"fields\":{\"uid\":{\"stringValue\":\"7BDcCsXJCyVV6V5EXgE4\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"fjkldsnfjkldafnks\"}]}}},\"createTime\":\"2023-01-06T08:34:31.452001Z\",\"updateTime\":\"2023-01-06T08:34:31.452001Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"27e148bc-8d47-4906-ac7b-2c897e25d0d3\",\"timestamp\":\"2023-01-06T08:34:45.475Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\"}}"}}
[warn] ⚠  functions: TypeError: firestore.collection(...).get(...).where is not a function
    at /Users/couzmec/DANDELA/dandela-web-app/functions/index.js:53:10
    at cloudFunction (/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)
    at /usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:516:16
    at runFunction (/usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:504:15)
    at runBackground (/usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:515:11)
    at processBackground (/usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:499:11)
    at /usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27
    at Layer.handle [as handle_request] (/usr/local/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)
    at next (/usr/local/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:137:13)
    at next (/usr/local/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:131:14) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"TypeError: firestore.collection(...).get(...).where is not a function\n    at /Users/couzmec/DANDELA/dandela-web-app/functions/index.js:53:10\n    at cloudFunction (/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/cloud-functions.js:79:23)\n    at /usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:516:16\n    at runFunction (/usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:504:15)\n    at runBackground (/usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:515:11)\n    at processBackground (/usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:499:11)\n    at /usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:27\n    at Layer.handle [as handle_request] (/usr/local/lib/node_modules/firebase-tools/node_modules/express/lib/router/layer.js:95:5)\n    at next (/usr/local/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:137:13)\n    at next (/usr/local/lib/node_modules/firebase-tools/node_modules/express/lib/router/route.js:131:14)"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[debug] [2023-01-06T08:34:46.244Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:34:46.245Z] [worker-us-central1-updateTokenUser-74ab74b3-c78c-4b9a-a4e6-4cf580eaff5a]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-74ab74b3-c78c-4b9a-a4e6-4cf580eaff5a]: exited"}}
[debug] [2023-01-06T08:34:46.245Z] [worker-us-central1-updateTokenUser-74ab74b3-c78c-4b9a-a4e6-4cf580eaff5a]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-74ab74b3-c78c-4b9a-a4e6-4cf580eaff5a]: FINISHED"}}
[debug] [2023-01-06T08:34:46.248Z] Jan 06, 2023 9:34:46 AM com.google.cloud.datastore.emulator.impl.events.FunctionsEmulatorEventPublisher sendHttpRequest
WARNING: Unsuccessful HTTP response when publishing event for projects/dandelawebapp/triggers/us-central1-updateTokenUser-0: 500 Internal Server Error
{"code":"ECONNRESET"}
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:34:46 AM com.google.cloud.datastore.emulator.impl.events.FunctionsEmulatorEventPublisher sendHttpRequest\nWARNING: Unsuccessful HTTP response when publishing event for projects/dandelawebapp/triggers/us-central1-updateTokenUser-0: 500 Internal Server Error\n{\"code\":\"ECONNRESET\"}\n"}}
[debug] [2023-01-06T08:35:03.274Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:35:04.280Z] Validating nodejs source
[debug] [2023-01-06T08:35:04.643Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:35:04.644Z] Building nodejs source
[debug] [2023-01-06T08:35:04.644Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:35:04.743Z] Serving at port 9005

[debug] [2023-01-06T08:35:04.874Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:35:04.876Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:35:13.790Z] Jan 06, 2023 9:35:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:35:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:35:13.814Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:35:13.814Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:35:13.815Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:35:13.814Z"],"workRunningCount":1}
[debug] [2023-01-06T08:35:13.815Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:35:13.818Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:35:13.818Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:35:13.818Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:35:13.823Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:35:13.824Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:35:14.320Z] [runtime-status] [2255] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:35:14.320Z] [runtime-status] [2255] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:35:14.320Z] [runtime-status] [2255] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:35:14.321Z] [runtime-status] [2255] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:35:14.420Z] [runtime-status] [2255] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:35:14.420Z] [runtime-status] [2255] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:35:14.421Z] [runtime-status] [2255] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:35:14.421Z] [runtime-status] [2255] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:35:14.422Z] [runtime-status] [2255] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:35:14.422Z] [runtime-status] [2255] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:35:14.423Z] [runtime-status] [2255] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:35:14.428Z] [runtime-status] [2255] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:35:14.428Z] [runtime-status] [2255] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_6fc2dfff90370c6f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_6fc2dfff90370c6f.sock"}}
[debug] [2023-01-06T08:35:14.433Z] [worker-us-central1-updateTokenUser-f6b5aad7-7851-44f9-806b-d798b2b4eec7]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f6b5aad7-7851-44f9-806b-d798b2b4eec7]: IDLE"}}
[debug] [2023-01-06T08:35:14.433Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:35:14.433Z] [worker-us-central1-updateTokenUser-f6b5aad7-7851-44f9-806b-d798b2b4eec7]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f6b5aad7-7851-44f9-806b-d798b2b4eec7]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:35:14.439Z] [runtime-status] [2255] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:35:14.439Z] [runtime-status] [2255] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","fields":{"uid":{"stringValue":"7BDcCsXJCyVV6V5EXgE4"},"tokens":{"arrayValue":{"values":[{"stringValue":"fjkldsnfjkldafnks"},{"stringValue":"alalalalalala"},{"stringValue":"meeeeerde"}]}}},"createTime":"2023-01-06T08:34:31.452001Z","updateTime":"2023-01-06T08:35:13.803650Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","fields":{"uid":{"stringValue":"7BDcCsXJCyVV6V5EXgE4"},"tokens":{"arrayValue":{"values":[{"stringValue":"fjkldsnfjkldafnks"},{"stringValue":"alalalalalala"}]}}},"createTime":"2023-01-06T08:34:31.452001Z","updateTime":"2023-01-06T08:34:45.475522Z"},"updateMask":{}},"context":{"eventId":"18bd38e1-9d96-411b-a6c8-8427fd4aed9b","timestamp":"2023-01-06T08:35:13.803Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2255] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"fields\":{\"uid\":{\"stringValue\":\"7BDcCsXJCyVV6V5EXgE4\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"fjkldsnfjkldafnks\"},{\"stringValue\":\"alalalalalala\"},{\"stringValue\":\"meeeeerde\"}]}}},\"createTime\":\"2023-01-06T08:34:31.452001Z\",\"updateTime\":\"2023-01-06T08:35:13.803650Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"fields\":{\"uid\":{\"stringValue\":\"7BDcCsXJCyVV6V5EXgE4\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"fjkldsnfjkldafnks\"},{\"stringValue\":\"alalalalalala\"}]}}},\"createTime\":\"2023-01-06T08:34:31.452001Z\",\"updateTime\":\"2023-01-06T08:34:45.475522Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"18bd38e1-9d96-411b-a6c8-8427fd4aed9b\",\"timestamp\":\"2023-01-06T08:35:13.803Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\"}}"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:35:14.449Z] [worker-us-central1-updateTokenUser-f6b5aad7-7851-44f9-806b-d798b2b4eec7]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f6b5aad7-7851-44f9-806b-d798b2b4eec7]: IDLE"}}
[debug] [2023-01-06T08:35:14.449Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 9.624334ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 9.624334ms"}}
[debug] [2023-01-06T08:35:14.616Z] Jan 06, 2023 9:35:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:35:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  NO user null {"user":"NO user null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m NO user null"}}
[info] >  Error subscribing to topic: FirebaseMessagingError: An error occurred when trying to authenticate to the FCM servers. Make sure the credential used to authenticate this SDK has the proper permissions. See https://firebase.google.com/docs/admin/setup for setup instructions. Raw server response: "<HTML> {"user":"Error subscribing to topic: FirebaseMessagingError: An error occurred when trying to authenticate to the FCM servers. Make sure the credential used to authenticate this SDK has the proper permissions. See https://firebase.google.com/docs/admin/setup for setup instructions. Raw server response: \"<HTML>","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Error subscribing to topic: FirebaseMessagingError: An error occurred when trying to authenticate to the FCM servers. Make sure the credential used to authenticate this SDK has the proper permissions. See https://firebase.google.com/docs/admin/setup for setup instructions. Raw server response: \"<HTML>"}}
[info] >  <HEAD> {"user":"<HEAD>","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m <HEAD>"}}
[info] >  <TITLE>Unauthorized</TITLE> {"user":"<TITLE>Unauthorized</TITLE>","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m <TITLE>Unauthorized</TITLE>"}}
[info] >  </HEAD> {"user":"</HEAD>","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m </HEAD>"}}
[info] >  <BODY BGCOLOR="#FFFFFF" TEXT="#000000"> {"user":"<BODY BGCOLOR=\"#FFFFFF\" TEXT=\"#000000\">","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m <BODY BGCOLOR=\"#FFFFFF\" TEXT=\"#000000\">"}}
[info] >  <H1>Unauthorized</H1> {"user":"<H1>Unauthorized</H1>","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m <H1>Unauthorized</H1>"}}
[info] >  <H2>Error 401</H2> {"user":"<H2>Error 401</H2>","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m <H2>Error 401</H2>"}}
[info] >  </BODY> {"user":"</BODY>","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m </BODY>"}}
[info] >  </HTML> {"user":"</HTML>","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m </HTML>"}}
[info] >  ". Status code: 401. {"user":"\". Status code: 401.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m \". Status code: 401."}}
[info] >      at createFirebaseError (/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/messaging/messaging-errors-internal.js:57:12) {"user":"    at createFirebaseError (/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/messaging/messaging-errors-internal.js:57:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     at createFirebaseError (/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/messaging/messaging-errors-internal.js:57:12)"}}
[info] >      at /Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/messaging/messaging-api-request-internal.js:79:75 {"user":"    at /Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/messaging/messaging-api-request-internal.js:79:75","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/messaging/messaging-api-request-internal.js:79:75"}}
[info] >      at processTicksAndRejections (node:internal/process/task_queues:96:5) { {"user":"    at processTicksAndRejections (node:internal/process/task_queues:96:5) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     at processTicksAndRejections (node:internal/process/task_queues:96:5) {"}}
[info] >    errorInfo: { {"user":"  errorInfo: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   errorInfo: {"}}
[info] >      code: 'messaging/authentication-error', {"user":"    code: 'messaging/authentication-error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'messaging/authentication-error',"}}
[info] >      message: 'An error occurred when trying to authenticate to the FCM servers. Make sure the credential used to authenticate this SDK has the proper permissions. See https://firebase.google.com/docs/admin/setup for setup instructions. Raw server response: "<HTML>\n' + {"user":"    message: 'An error occurred when trying to authenticate to the FCM servers. Make sure the credential used to authenticate this SDK has the proper permissions. See https://firebase.google.com/docs/admin/setup for setup instructions. Raw server response: \"<HTML>\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'An error occurred when trying to authenticate to the FCM servers. Make sure the credential used to authenticate this SDK has the proper permissions. See https://firebase.google.com/docs/admin/setup for setup instructions. Raw server response: \"<HTML>\\n' +"}}
[info] >        '<HEAD>\n' + {"user":"      '<HEAD>\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m       '<HEAD>\\n' +"}}
[info] >        '<TITLE>Unauthorized</TITLE>\n' + {"user":"      '<TITLE>Unauthorized</TITLE>\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m       '<TITLE>Unauthorized</TITLE>\\n' +"}}
[info] >        '</HEAD>\n' + {"user":"      '</HEAD>\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m       '</HEAD>\\n' +"}}
[info] >        '<BODY BGCOLOR="#FFFFFF" TEXT="#000000">\n' + {"user":"      '<BODY BGCOLOR=\"#FFFFFF\" TEXT=\"#000000\">\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m       '<BODY BGCOLOR=\"#FFFFFF\" TEXT=\"#000000\">\\n' +"}}
[info] >        '<H1>Unauthorized</H1>\n' + {"user":"      '<H1>Unauthorized</H1>\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m       '<H1>Unauthorized</H1>\\n' +"}}
[info] >        '<H2>Error 401</H2>\n' + {"user":"      '<H2>Error 401</H2>\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m       '<H2>Error 401</H2>\\n' +"}}
[info] >        '</BODY>\n' + {"user":"      '</BODY>\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m       '</BODY>\\n' +"}}
[info] >        '</HTML>\n' + {"user":"      '</HTML>\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m       '</HTML>\\n' +"}}
[info] >        '". Status code: 401.' {"user":"      '\". Status code: 401.'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m       '\". Status code: 401.'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    codePrefix: 'messaging' {"user":"  codePrefix: 'messaging'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   codePrefix: 'messaging'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-01-06T08:35:43.822Z] Jan 06, 2023 9:35:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:35:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:35:43.825Z] Jan 06, 2023 9:35:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:35:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:35:44.662Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:35:45.666Z] Validating nodejs source
[debug] [2023-01-06T08:35:46.201Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:35:46.201Z] Building nodejs source
[debug] [2023-01-06T08:35:46.202Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:35:46.304Z] Serving at port 9005

[debug] [2023-01-06T08:35:46.432Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:35:46.434Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:35:46.436Z] [worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:35:46.436Z] [worker-us-central1-updateTokenUser-f6b5aad7-7851-44f9-806b-d798b2b4eec7]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f6b5aad7-7851-44f9-806b-d798b2b4eec7]: FINISHING"}}
[debug] [2023-01-06T08:35:46.439Z] [worker-us-central1-updateTokenUser-f6b5aad7-7851-44f9-806b-d798b2b4eec7]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f6b5aad7-7851-44f9-806b-d798b2b4eec7]: exited"}}
[debug] [2023-01-06T08:35:46.439Z] [worker-us-central1-updateTokenUser-f6b5aad7-7851-44f9-806b-d798b2b4eec7]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f6b5aad7-7851-44f9-806b-d798b2b4eec7]: FINISHED"}}
[debug] [2023-01-06T08:35:55.735Z] Jan 06, 2023 9:35:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:35:55 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:35:55.759Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:35:55.759Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:35:55.760Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:35:55.759Z"],"workRunningCount":1}
[debug] [2023-01-06T08:35:55.760Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:35:55.764Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:35:55.764Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:35:55.764Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:35:55.770Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:35:55.770Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:35:56.336Z] [runtime-status] [2269] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:35:56.337Z] [runtime-status] [2269] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:35:56.337Z] [runtime-status] [2269] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:35:56.337Z] [runtime-status] [2269] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:35:56.439Z] [runtime-status] [2269] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:35:56.439Z] [runtime-status] [2269] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:35:56.440Z] [runtime-status] [2269] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:35:56.440Z] [runtime-status] [2269] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:35:56.440Z] [runtime-status] [2269] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:35:56.440Z] [runtime-status] [2269] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:35:56.441Z] [runtime-status] [2269] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:35:56.446Z] [runtime-status] [2269] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:35:56.447Z] [runtime-status] [2269] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_0fbf52f7d342eeb7.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_0fbf52f7d342eeb7.sock"}}
[debug] [2023-01-06T08:35:56.483Z] [worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: IDLE"}}
[debug] [2023-01-06T08:35:56.483Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:35:56.483Z] [worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:35:56.490Z] [runtime-status] [2269] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:35:56.490Z] [runtime-status] [2269] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","fields":{"uid":{"stringValue":"7BDcCsXJCyVV6V5EXgE4"},"tokens":{"arrayValue":{"values":[{"stringValue":"fjkldsnfjkldafnks"},{"stringValue":"alalalalalala"},{"stringValue":"meeeeerde"},{"stringValue":"putain"}]}}},"createTime":"2023-01-06T08:34:31.452001Z","updateTime":"2023-01-06T08:35:55.746979Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","fields":{"uid":{"stringValue":"7BDcCsXJCyVV6V5EXgE4"},"tokens":{"arrayValue":{"values":[{"stringValue":"fjkldsnfjkldafnks"},{"stringValue":"alalalalalala"},{"stringValue":"meeeeerde"}]}}},"createTime":"2023-01-06T08:34:31.452001Z","updateTime":"2023-01-06T08:35:13.803650Z"},"updateMask":{}},"context":{"eventId":"51ad23ef-6523-4ddb-82e9-440c38cc7646","timestamp":"2023-01-06T08:35:55.746Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"fields\":{\"uid\":{\"stringValue\":\"7BDcCsXJCyVV6V5EXgE4\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"fjkldsnfjkldafnks\"},{\"stringValue\":\"alalalalalala\"},{\"stringValue\":\"meeeeerde\"},{\"stringValue\":\"putain\"}]}}},\"createTime\":\"2023-01-06T08:34:31.452001Z\",\"updateTime\":\"2023-01-06T08:35:55.746979Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"fields\":{\"uid\":{\"stringValue\":\"7BDcCsXJCyVV6V5EXgE4\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"fjkldsnfjkldafnks\"},{\"stringValue\":\"alalalalalala\"},{\"stringValue\":\"meeeeerde\"}]}}},\"createTime\":\"2023-01-06T08:34:31.452001Z\",\"updateTime\":\"2023-01-06T08:35:13.803650Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"51ad23ef-6523-4ddb-82e9-440c38cc7646\",\"timestamp\":\"2023-01-06T08:35:55.746Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\"}}"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:35:56.493Z] [worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: IDLE"}}
[debug] [2023-01-06T08:35:56.493Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 2.957333ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 2.957333ms"}}
[debug] [2023-01-06T08:35:56.635Z] Jan 06, 2023 9:35:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:35:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  NO user null {"user":"NO user null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m NO user null"}}
[debug] [2023-01-06T08:36:07.680Z] Jan 06, 2023 9:36:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:36:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:36:07.701Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:36:07.701Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:36:07.702Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:36:07.701Z"],"workRunningCount":1}
[debug] [2023-01-06T08:36:07.702Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:36:07.706Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:36:07.706Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:36:07.706Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:36:07.706Z] [worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:36:07.710Z] [runtime-status] [2269] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:36:07.710Z] [runtime-status] [2269] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","fields":{"uid":{"stringValue":"7BDcCsXJCyVV6V5EXgE4"},"tokens":{"arrayValue":{"values":[{"stringValue":"fjkldsnfjkldafnks"},{"stringValue":"alalalalalala"},{"stringValue":"meeeeerde"},{"stringValue":"putain"}]}},"type":{"stringValue":"Admin"}},"createTime":"2023-01-06T08:34:31.452001Z","updateTime":"2023-01-06T08:36:07.691105Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","fields":{"uid":{"stringValue":"7BDcCsXJCyVV6V5EXgE4"},"tokens":{"arrayValue":{"values":[{"stringValue":"fjkldsnfjkldafnks"},{"stringValue":"alalalalalala"},{"stringValue":"meeeeerde"},{"stringValue":"putain"}]}}},"createTime":"2023-01-06T08:34:31.452001Z","updateTime":"2023-01-06T08:35:55.746979Z"},"updateMask":{}},"context":{"eventId":"4791f368-6ebd-4234-a6e8-ebe682228ec0","timestamp":"2023-01-06T08:36:07.691Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2269] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"fields\":{\"uid\":{\"stringValue\":\"7BDcCsXJCyVV6V5EXgE4\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"fjkldsnfjkldafnks\"},{\"stringValue\":\"alalalalalala\"},{\"stringValue\":\"meeeeerde\"},{\"stringValue\":\"putain\"}]}},\"type\":{\"stringValue\":\"Admin\"}},\"createTime\":\"2023-01-06T08:34:31.452001Z\",\"updateTime\":\"2023-01-06T08:36:07.691105Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"fields\":{\"uid\":{\"stringValue\":\"7BDcCsXJCyVV6V5EXgE4\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"fjkldsnfjkldafnks\"},{\"stringValue\":\"alalalalalala\"},{\"stringValue\":\"meeeeerde\"},{\"stringValue\":\"putain\"}]}}},\"createTime\":\"2023-01-06T08:34:31.452001Z\",\"updateTime\":\"2023-01-06T08:35:55.746979Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"4791f368-6ebd-4234-a6e8-ebe682228ec0\",\"timestamp\":\"2023-01-06T08:36:07.691Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\"}}"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:36:07.711Z] [worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: IDLE"}}
[debug] [2023-01-06T08:36:07.711Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 1.782042ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 1.782042ms"}}
[info] >  NO user null {"user":"NO user null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m NO user null"}}
[debug] [2023-01-06T08:36:37.713Z] Jan 06, 2023 9:36:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:36:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:36:37.714Z] Jan 06, 2023 9:36:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:36:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:37:06.508Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:37:07.514Z] Validating nodejs source
[debug] [2023-01-06T08:37:07.893Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:37:07.894Z] Building nodejs source
[debug] [2023-01-06T08:37:07.894Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:37:07.995Z] Serving at port 9005

[debug] [2023-01-06T08:37:08.124Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:37:08.127Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:37:08.129Z] [worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:37:08.129Z] [worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: FINISHING"}}
[debug] [2023-01-06T08:37:08.137Z] [worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: exited"}}
[debug] [2023-01-06T08:37:08.137Z] [worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-f1e70196-8dac-4821-a9a0-600cd426506f]: FINISHED"}}
[debug] [2023-01-06T08:37:08.853Z] Jan 06, 2023 9:37:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:37:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:37:08.862Z] Jan 06, 2023 9:37:08 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:37:08 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2023-01-06T08:37:17.493Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:37:18.495Z] Validating nodejs source
[debug] [2023-01-06T08:37:18.828Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:37:18.828Z] Building nodejs source
[debug] [2023-01-06T08:37:18.828Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:37:18.918Z] Serving at port 9005

[debug] [2023-01-06T08:37:19.030Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:37:19.032Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:37:27.478Z] Jan 06, 2023 9:37:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:37:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:37:27.488Z] Jan 06, 2023 9:37:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:37:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:37:27.495Z] Jan 06, 2023 9:37:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:37:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:37:27.508Z] Jan 06, 2023 9:37:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:37:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:37:27.512Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:37:27.512Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:37:27.512Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:37:27.512Z"],"workRunningCount":1}
[debug] [2023-01-06T08:37:27.512Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:37:27.515Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:37:27.516Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:37:27.516Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:37:27.520Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:37:27.520Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:37:28.092Z] [runtime-status] [2310] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:37:28.092Z] [runtime-status] [2310] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:37:28.093Z] [runtime-status] [2310] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:37:28.093Z] [runtime-status] [2310] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:37:28.191Z] [runtime-status] [2310] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:37:28.191Z] [runtime-status] [2310] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:37:28.191Z] [runtime-status] [2310] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:37:28.192Z] [runtime-status] [2310] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:37:28.192Z] [runtime-status] [2310] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:37:28.193Z] [runtime-status] [2310] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:37:28.193Z] [runtime-status] [2310] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:37:28.198Z] [runtime-status] [2310] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:37:28.198Z] [runtime-status] [2310] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_ccee6147d1a7963d.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_ccee6147d1a7963d.sock"}}
[debug] [2023-01-06T08:37:28.233Z] [worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: IDLE"}}
[debug] [2023-01-06T08:37:28.233Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:37:28.233Z] [worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:37:28.238Z] [runtime-status] [2310] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:37:28.239Z] [runtime-status] [2310] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","fields":{"uid":{"stringValue":"7BDcCsXJCyVV6V5EXgE4"},"type":{"stringValue":"Admin"},"tokens":{"arrayValue":{"values":[{"stringValue":"fjkldsnfjkldafnks"},{"stringValue":"alalalalalala"},{"stringValue":"meeeeerde"},{"stringValue":"putain"},{"stringValue":"ptetre cest bon"}]}}},"createTime":"2023-01-06T08:34:31.452001Z","updateTime":"2023-01-06T08:37:27.502061Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","fields":{"uid":{"stringValue":"7BDcCsXJCyVV6V5EXgE4"},"tokens":{"arrayValue":{"values":[{"stringValue":"fjkldsnfjkldafnks"},{"stringValue":"alalalalalala"},{"stringValue":"meeeeerde"},{"stringValue":"putain"}]}},"type":{"stringValue":"Admin"}},"createTime":"2023-01-06T08:34:31.452001Z","updateTime":"2023-01-06T08:36:07.691105Z"},"updateMask":{}},"context":{"eventId":"40942585-676c-4b8d-9a86-9c2f7245b84c","timestamp":"2023-01-06T08:37:27.502Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"fields\":{\"uid\":{\"stringValue\":\"7BDcCsXJCyVV6V5EXgE4\"},\"type\":{\"stringValue\":\"Admin\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"fjkldsnfjkldafnks\"},{\"stringValue\":\"alalalalalala\"},{\"stringValue\":\"meeeeerde\"},{\"stringValue\":\"putain\"},{\"stringValue\":\"ptetre cest bon\"}]}}},\"createTime\":\"2023-01-06T08:34:31.452001Z\",\"updateTime\":\"2023-01-06T08:37:27.502061Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"fields\":{\"uid\":{\"stringValue\":\"7BDcCsXJCyVV6V5EXgE4\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"fjkldsnfjkldafnks\"},{\"stringValue\":\"alalalalalala\"},{\"stringValue\":\"meeeeerde\"},{\"stringValue\":\"putain\"}]}},\"type\":{\"stringValue\":\"Admin\"}},\"createTime\":\"2023-01-06T08:34:31.452001Z\",\"updateTime\":\"2023-01-06T08:36:07.691105Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"40942585-676c-4b8d-9a86-9c2f7245b84c\",\"timestamp\":\"2023-01-06T08:37:27.502Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\"}}"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:37:28.241Z] [worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: IDLE"}}
[debug] [2023-01-06T08:37:28.241Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 2.697292ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 2.697292ms"}}
[debug] [2023-01-06T08:37:28.382Z] Jan 06, 2023 9:37:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:37:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon' {"user":"    'ptetre cest bon'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-01-06T08:38:27.535Z] Jan 06, 2023 9:38:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:38:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:38:27.537Z] Jan 06, 2023 9:38:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:38:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:38:27.551Z] Jan 06, 2023 9:38:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:38:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:38:27.557Z] Jan 06, 2023 9:38:27 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:38:27 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2023-01-06T08:39:05.507Z] Jan 06, 2023 9:39:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:39:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:39:05.521Z] Jan 06, 2023 9:39:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:39:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:39:05.527Z] Jan 06, 2023 9:39:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:39:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:39:05.556Z] Jan 06, 2023 9:39:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:39:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:39:15.721Z] Jan 06, 2023 9:39:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:39:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:39:15.741Z] Jan 06, 2023 9:39:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:39:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:39:15.744Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:39:15.744Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:39:15.745Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:39:15.744Z"],"workRunningCount":1}
[debug] [2023-01-06T08:39:15.745Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:39:15.749Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:39:15.750Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:39:15.750Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:39:15.750Z] [worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:39:15.756Z] [runtime-status] [2310] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:39:15.757Z] [runtime-status] [2310] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","fields":{"uid":{"stringValue":"UmoXhiY1e44fKq8YstxI"},"type":{"stringValue":"Admin"},"tokens":{"arrayValue":{"values":[{"stringValue":"alalal"},{"stringValue":"merde"}]}}},"createTime":"2023-01-06T08:39:05.535058Z","updateTime":"2023-01-06T08:39:15.730686Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","fields":{"uid":{"stringValue":"UmoXhiY1e44fKq8YstxI"},"tokens":{"arrayValue":{"values":[{"stringValue":"alalal"}]}},"type":{"stringValue":"Admin"}},"createTime":"2023-01-06T08:39:05.535058Z","updateTime":"2023-01-06T08:39:05.535058Z"},"updateMask":{}},"context":{"eventId":"ffe6d35b-8305-40a7-ade1-2b44901dfaa4","timestamp":"2023-01-06T08:39:15.730Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2310] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"fields\":{\"uid\":{\"stringValue\":\"UmoXhiY1e44fKq8YstxI\"},\"type\":{\"stringValue\":\"Admin\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"alalal\"},{\"stringValue\":\"merde\"}]}}},\"createTime\":\"2023-01-06T08:39:05.535058Z\",\"updateTime\":\"2023-01-06T08:39:15.730686Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"fields\":{\"uid\":{\"stringValue\":\"UmoXhiY1e44fKq8YstxI\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"alalal\"}]}},\"type\":{\"stringValue\":\"Admin\"}},\"createTime\":\"2023-01-06T08:39:05.535058Z\",\"updateTime\":\"2023-01-06T08:39:05.535058Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"ffe6d35b-8305-40a7-ade1-2b44901dfaa4\",\"timestamp\":\"2023-01-06T08:39:15.730Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\"}}"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:39:15.760Z] [worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: IDLE"}}
[debug] [2023-01-06T08:39:15.760Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 3.745625ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 3.745625ms"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon' {"user":"    'ptetre cest bon'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'UmoXhiY1e44fKq8YstxI', {"user":"  uid: 'UmoXhiY1e44fKq8YstxI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'UmoXhiY1e44fKq8YstxI',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ 'alalal', 'merde' ] {"user":"  tokens: [ 'alalal', 'merde' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: [ 'alalal', 'merde' ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-01-06T08:40:15.767Z] Jan 06, 2023 9:40:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Jan 06, 2023 9:40:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:40:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nJan 06, 2023 9:40:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:40:16.816Z] Jan 06, 2023 9:40:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:40:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:40:16.823Z] Jan 06, 2023 9:40:16 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:40:16 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2023-01-06T08:41:10.628Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:41:11.633Z] Validating nodejs source
[debug] [2023-01-06T08:41:12.702Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:41:12.702Z] Building nodejs source
[debug] [2023-01-06T08:41:12.703Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:41:12.805Z] Serving at port 9005

[debug] [2023-01-06T08:41:12.932Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:41:12.934Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:41:12.936Z] [worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:41:12.936Z] [worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: FINISHING"}}
[debug] [2023-01-06T08:41:12.943Z] [worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: exited"}}
[debug] [2023-01-06T08:41:12.943Z] [worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-2dab7078-69f0-408e-a24d-2d0035b3ad35]: FINISHED"}}
[debug] [2023-01-06T08:41:15.804Z] Jan 06, 2023 9:41:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:41:15 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:41:23.965Z] Jan 06, 2023 9:41:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:41:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:41:23.976Z] Jan 06, 2023 9:41:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:41:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:41:23.983Z] Jan 06, 2023 9:41:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:41:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:41:24.004Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:41:24.004Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:41:24.004Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:41:24.004Z"],"workRunningCount":1}
[debug] [2023-01-06T08:41:24.004Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:41:24.007Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:41:24.007Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:41:24.007Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:41:24.015Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:41:24.016Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:41:24.582Z] [runtime-status] [2347] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:41:24.582Z] [runtime-status] [2347] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:41:24.582Z] [runtime-status] [2347] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:41:24.582Z] [runtime-status] [2347] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:41:24.680Z] [runtime-status] [2347] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:41:24.680Z] [runtime-status] [2347] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:41:24.680Z] [runtime-status] [2347] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:41:24.681Z] [runtime-status] [2347] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:41:24.681Z] [runtime-status] [2347] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:41:24.681Z] [runtime-status] [2347] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:41:24.682Z] [runtime-status] [2347] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:41:24.687Z] [runtime-status] [2347] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:41:24.687Z] [runtime-status] [2347] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_645a370b93d58987.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_645a370b93d58987.sock"}}
[debug] [2023-01-06T08:41:24.727Z] [worker-us-central1-updateTokenUser-b6081f8a-6777-4767-b848-2ff5de6b0759]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-b6081f8a-6777-4767-b848-2ff5de6b0759]: IDLE"}}
[debug] [2023-01-06T08:41:24.728Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:41:24.728Z] [worker-us-central1-updateTokenUser-b6081f8a-6777-4767-b848-2ff5de6b0759]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-b6081f8a-6777-4767-b848-2ff5de6b0759]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:41:24.735Z] [runtime-status] [2347] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:41:24.735Z] [runtime-status] [2347] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","fields":{"uid":{"stringValue":"UmoXhiY1e44fKq8YstxI"},"type":{"stringValue":"Admin"},"tokens":{"arrayValue":{"values":[{"stringValue":"alalal"},{"stringValue":"merde"},{"stringValue":"ferland mendy"}]}}},"createTime":"2023-01-06T08:39:05.535058Z","updateTime":"2023-01-06T08:41:23.993744Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","fields":{"uid":{"stringValue":"UmoXhiY1e44fKq8YstxI"},"type":{"stringValue":"Admin"},"tokens":{"arrayValue":{"values":[{"stringValue":"alalal"},{"stringValue":"merde"}]}}},"createTime":"2023-01-06T08:39:05.535058Z","updateTime":"2023-01-06T08:39:15.730686Z"},"updateMask":{}},"context":{"eventId":"b580c32a-cd47-42e0-aeb7-834d5463849d","timestamp":"2023-01-06T08:41:23.993Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2347] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"fields\":{\"uid\":{\"stringValue\":\"UmoXhiY1e44fKq8YstxI\"},\"type\":{\"stringValue\":\"Admin\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"alalal\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"ferland mendy\"}]}}},\"createTime\":\"2023-01-06T08:39:05.535058Z\",\"updateTime\":\"2023-01-06T08:41:23.993744Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"fields\":{\"uid\":{\"stringValue\":\"UmoXhiY1e44fKq8YstxI\"},\"type\":{\"stringValue\":\"Admin\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"alalal\"},{\"stringValue\":\"merde\"}]}}},\"createTime\":\"2023-01-06T08:39:05.535058Z\",\"updateTime\":\"2023-01-06T08:39:15.730686Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"b580c32a-cd47-42e0-aeb7-834d5463849d\",\"timestamp\":\"2023-01-06T08:41:23.993Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\"}}"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:41:24.738Z] [worker-us-central1-updateTokenUser-b6081f8a-6777-4767-b848-2ff5de6b0759]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-b6081f8a-6777-4767-b848-2ff5de6b0759]: IDLE"}}
[debug] [2023-01-06T08:41:24.739Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 3.157958ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 3.157958ms"}}
[debug] [2023-01-06T08:41:24.885Z] Jan 06, 2023 9:41:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:41:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon' {"user":"    'ptetre cest bon'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'UmoXhiY1e44fKq8YstxI', {"user":"  uid: 'UmoXhiY1e44fKq8YstxI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'UmoXhiY1e44fKq8YstxI',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ 'alalal', 'merde', 'ferland mendy' ] {"user":"  tokens: [ 'alalal', 'merde', 'ferland mendy' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: [ 'alalal', 'merde', 'ferland mendy' ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-01-06T08:42:07.387Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:42:08.391Z] Validating nodejs source
[debug] [2023-01-06T08:42:08.728Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:42:08.728Z] Building nodejs source
[debug] [2023-01-06T08:42:08.729Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:42:08.830Z] Serving at port 9005

[debug] [2023-01-06T08:42:09.074Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:42:09.076Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:42:09.078Z] [worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:42:09.078Z] [worker-us-central1-updateTokenUser-b6081f8a-6777-4767-b848-2ff5de6b0759]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-b6081f8a-6777-4767-b848-2ff5de6b0759]: FINISHING"}}
[debug] [2023-01-06T08:42:09.084Z] [worker-us-central1-updateTokenUser-b6081f8a-6777-4767-b848-2ff5de6b0759]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-b6081f8a-6777-4767-b848-2ff5de6b0759]: exited"}}
[debug] [2023-01-06T08:42:09.084Z] [worker-us-central1-updateTokenUser-b6081f8a-6777-4767-b848-2ff5de6b0759]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-b6081f8a-6777-4767-b848-2ff5de6b0759]: FINISHED"}}
[debug] [2023-01-06T08:42:23.958Z] Jan 06, 2023 9:42:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:42:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:42:23.974Z] Jan 06, 2023 9:42:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:42:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:42:23.976Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:42:23.976Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:42:23.976Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:42:23.976Z"],"workRunningCount":1}
[debug] [2023-01-06T08:42:23.977Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:42:23.979Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:42:23.979Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:42:23.979Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:42:23.984Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:42:23.985Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:42:23.986Z] Jan 06, 2023 9:42:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:42:23 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:42:24.550Z] [runtime-status] [2376] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:42:24.550Z] [runtime-status] [2376] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:42:24.550Z] [runtime-status] [2376] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:42:24.551Z] [runtime-status] [2376] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:42:24.649Z] [runtime-status] [2376] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:42:24.650Z] [runtime-status] [2376] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:42:24.650Z] [runtime-status] [2376] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:42:24.650Z] [runtime-status] [2376] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:42:24.651Z] [runtime-status] [2376] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:42:24.651Z] [runtime-status] [2376] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:42:24.652Z] [runtime-status] [2376] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:42:24.657Z] [runtime-status] [2376] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:42:24.657Z] [runtime-status] [2376] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_4c661297eff3f025.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_4c661297eff3f025.sock"}}
[debug] [2023-01-06T08:42:24.698Z] [worker-us-central1-updateTokenUser-34c41be0-a6c0-4cc4-8d5f-161eaf6e565c]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-34c41be0-a6c0-4cc4-8d5f-161eaf6e565c]: IDLE"}}
[debug] [2023-01-06T08:42:24.699Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:42:24.699Z] [worker-us-central1-updateTokenUser-34c41be0-a6c0-4cc4-8d5f-161eaf6e565c]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-34c41be0-a6c0-4cc4-8d5f-161eaf6e565c]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:42:24.706Z] [runtime-status] [2376] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:42:24.706Z] [runtime-status] [2376] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","fields":{"uid":{"stringValue":"UmoXhiY1e44fKq8YstxI"},"type":{"stringValue":"Admin"},"tokens":{"arrayValue":{"values":[{"stringValue":"alalal"},{"stringValue":"merde"},{"stringValue":"ferland mendy"},{"stringValue":"kbnueve"}]}}},"createTime":"2023-01-06T08:39:05.535058Z","updateTime":"2023-01-06T08:42:23.967590Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","fields":{"uid":{"stringValue":"UmoXhiY1e44fKq8YstxI"},"type":{"stringValue":"Admin"},"tokens":{"arrayValue":{"values":[{"stringValue":"alalal"},{"stringValue":"merde"},{"stringValue":"ferland mendy"}]}}},"createTime":"2023-01-06T08:39:05.535058Z","updateTime":"2023-01-06T08:41:23.993744Z"},"updateMask":{}},"context":{"eventId":"5681ce4f-fc3e-40ec-a837-7c27d8a81b54","timestamp":"2023-01-06T08:42:23.967Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2376] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"fields\":{\"uid\":{\"stringValue\":\"UmoXhiY1e44fKq8YstxI\"},\"type\":{\"stringValue\":\"Admin\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"alalal\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"ferland mendy\"},{\"stringValue\":\"kbnueve\"}]}}},\"createTime\":\"2023-01-06T08:39:05.535058Z\",\"updateTime\":\"2023-01-06T08:42:23.967590Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"fields\":{\"uid\":{\"stringValue\":\"UmoXhiY1e44fKq8YstxI\"},\"type\":{\"stringValue\":\"Admin\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"alalal\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"ferland mendy\"}]}}},\"createTime\":\"2023-01-06T08:39:05.535058Z\",\"updateTime\":\"2023-01-06T08:41:23.993744Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"5681ce4f-fc3e-40ec-a837-7c27d8a81b54\",\"timestamp\":\"2023-01-06T08:42:23.967Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\"}}"}}
[info] >  TOKENS ALL [] {"user":"TOKENS ALL []","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m TOKENS ALL []"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:42:24.709Z] [worker-us-central1-updateTokenUser-34c41be0-a6c0-4cc4-8d5f-161eaf6e565c]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-34c41be0-a6c0-4cc4-8d5f-161eaf6e565c]: IDLE"}}
[debug] [2023-01-06T08:42:24.709Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 3.571708ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 3.571708ms"}}
[debug] [2023-01-06T08:42:24.864Z] Jan 06, 2023 9:42:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:42:24 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon' {"user":"    'ptetre cest bon'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'UmoXhiY1e44fKq8YstxI', {"user":"  uid: 'UmoXhiY1e44fKq8YstxI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'UmoXhiY1e44fKq8YstxI',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ 'alalal', 'merde', 'ferland mendy', 'kbnueve' ] {"user":"  tokens: [ 'alalal', 'merde', 'ferland mendy', 'kbnueve' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: [ 'alalal', 'merde', 'ferland mendy', 'kbnueve' ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-01-06T08:42:47.727Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:42:48.735Z] Validating nodejs source
[debug] [2023-01-06T08:42:49.090Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:42:49.090Z] Building nodejs source
[debug] [2023-01-06T08:42:49.091Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:42:49.188Z] Serving at port 9005

[debug] [2023-01-06T08:42:49.315Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:42:49.317Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:42:49.320Z] [worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:42:49.320Z] [worker-us-central1-updateTokenUser-34c41be0-a6c0-4cc4-8d5f-161eaf6e565c]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-34c41be0-a6c0-4cc4-8d5f-161eaf6e565c]: FINISHING"}}
[debug] [2023-01-06T08:42:49.322Z] [worker-us-central1-updateTokenUser-34c41be0-a6c0-4cc4-8d5f-161eaf6e565c]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-34c41be0-a6c0-4cc4-8d5f-161eaf6e565c]: exited"}}
[debug] [2023-01-06T08:42:49.322Z] [worker-us-central1-updateTokenUser-34c41be0-a6c0-4cc4-8d5f-161eaf6e565c]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-34c41be0-a6c0-4cc4-8d5f-161eaf6e565c]: FINISHED"}}
[debug] [2023-01-06T08:42:56.777Z] Jan 06, 2023 9:42:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:42:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:42:56.794Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:42:56.793Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:42:56.794Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:42:56.793Z"],"workRunningCount":1}
[debug] [2023-01-06T08:42:56.794Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:42:56.797Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:42:56.798Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:42:56.798Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:42:56.803Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:42:56.804Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:42:57.299Z] [runtime-status] [2391] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:42:57.299Z] [runtime-status] [2391] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:42:57.299Z] [runtime-status] [2391] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:42:57.300Z] [runtime-status] [2391] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:42:57.399Z] [runtime-status] [2391] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:42:57.399Z] [runtime-status] [2391] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:42:57.399Z] [runtime-status] [2391] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:42:57.400Z] [runtime-status] [2391] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:42:57.401Z] [runtime-status] [2391] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:42:57.401Z] [runtime-status] [2391] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:42:57.401Z] [runtime-status] [2391] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:42:57.407Z] [runtime-status] [2391] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:42:57.407Z] [runtime-status] [2391] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_f90b4e18b9d6bc81.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_f90b4e18b9d6bc81.sock"}}
[debug] [2023-01-06T08:42:57.413Z] [worker-us-central1-updateTokenUser-b1ae6dec-fc0d-4b4f-b6bd-59ca343c1d08]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-b1ae6dec-fc0d-4b4f-b6bd-59ca343c1d08]: IDLE"}}
[debug] [2023-01-06T08:42:57.413Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:42:57.413Z] [worker-us-central1-updateTokenUser-b1ae6dec-fc0d-4b4f-b6bd-59ca343c1d08]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-b1ae6dec-fc0d-4b4f-b6bd-59ca343c1d08]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:42:57.419Z] [runtime-status] [2391] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:42:57.419Z] [runtime-status] [2391] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","fields":{"uid":{"stringValue":"UmoXhiY1e44fKq8YstxI"},"type":{"stringValue":"Admin"},"tokens":{"arrayValue":{"values":[{"stringValue":"alalal"},{"stringValue":"merde"},{"stringValue":"ferland mendy"},{"stringValue":"kbnueve"},{"stringValue":"camavinga"}]}}},"createTime":"2023-01-06T08:39:05.535058Z","updateTime":"2023-01-06T08:42:56.785756Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","fields":{"uid":{"stringValue":"UmoXhiY1e44fKq8YstxI"},"type":{"stringValue":"Admin"},"tokens":{"arrayValue":{"values":[{"stringValue":"alalal"},{"stringValue":"merde"},{"stringValue":"ferland mendy"},{"stringValue":"kbnueve"}]}}},"createTime":"2023-01-06T08:39:05.535058Z","updateTime":"2023-01-06T08:42:23.967590Z"},"updateMask":{}},"context":{"eventId":"08faa755-979e-4ebd-b4b1-2a1d444e7ae8","timestamp":"2023-01-06T08:42:56.785Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2391] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"fields\":{\"uid\":{\"stringValue\":\"UmoXhiY1e44fKq8YstxI\"},\"type\":{\"stringValue\":\"Admin\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"alalal\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"ferland mendy\"},{\"stringValue\":\"kbnueve\"},{\"stringValue\":\"camavinga\"}]}}},\"createTime\":\"2023-01-06T08:39:05.535058Z\",\"updateTime\":\"2023-01-06T08:42:56.785756Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"fields\":{\"uid\":{\"stringValue\":\"UmoXhiY1e44fKq8YstxI\"},\"type\":{\"stringValue\":\"Admin\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"alalal\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"ferland mendy\"},{\"stringValue\":\"kbnueve\"}]}}},\"createTime\":\"2023-01-06T08:39:05.535058Z\",\"updateTime\":\"2023-01-06T08:42:23.967590Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"08faa755-979e-4ebd-b4b1-2a1d444e7ae8\",\"timestamp\":\"2023-01-06T08:42:56.785Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\"}}"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:42:57.421Z] [worker-us-central1-updateTokenUser-b1ae6dec-fc0d-4b4f-b6bd-59ca343c1d08]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-b1ae6dec-fc0d-4b4f-b6bd-59ca343c1d08]: IDLE"}}
[debug] [2023-01-06T08:42:57.421Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 3.049667ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 3.049667ms"}}
[debug] [2023-01-06T08:42:57.559Z] Jan 06, 2023 9:42:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:42:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon' {"user":"    'ptetre cest bon'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'UmoXhiY1e44fKq8YstxI', {"user":"  uid: 'UmoXhiY1e44fKq8YstxI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'UmoXhiY1e44fKq8YstxI',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ 'alalal', 'merde', 'ferland mendy', 'kbnueve', 'camavinga' ] {"user":"  tokens: [ 'alalal', 'merde', 'ferland mendy', 'kbnueve', 'camavinga' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: [ 'alalal', 'merde', 'ferland mendy', 'kbnueve', 'camavinga' ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  TOKENS ALL [ {"user":"TOKENS ALL [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m TOKENS ALL ["}}
[info] >    [ {"user":"  [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon' {"user":"    'ptetre cest bon'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon'"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    [ 'alalal', 'merde', 'ferland mendy', 'kbnueve', 'camavinga' ] {"user":"  [ 'alalal', 'merde', 'ferland mendy', 'kbnueve', 'camavinga' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   [ 'alalal', 'merde', 'ferland mendy', 'kbnueve', 'camavinga' ]"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[debug] [2023-01-06T08:43:20.361Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:43:21.365Z] Validating nodejs source
[debug] [2023-01-06T08:43:21.749Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:43:21.749Z] Building nodejs source
[debug] [2023-01-06T08:43:21.750Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:43:21.853Z] Serving at port 9005

[debug] [2023-01-06T08:43:21.971Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:43:21.973Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:43:21.976Z] [worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:43:21.976Z] [worker-us-central1-updateTokenUser-b1ae6dec-fc0d-4b4f-b6bd-59ca343c1d08]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-b1ae6dec-fc0d-4b4f-b6bd-59ca343c1d08]: FINISHING"}}
[debug] [2023-01-06T08:43:21.979Z] [worker-us-central1-updateTokenUser-b1ae6dec-fc0d-4b4f-b6bd-59ca343c1d08]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-b1ae6dec-fc0d-4b4f-b6bd-59ca343c1d08]: exited"}}
[debug] [2023-01-06T08:43:21.979Z] [worker-us-central1-updateTokenUser-b1ae6dec-fc0d-4b4f-b6bd-59ca343c1d08]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-b1ae6dec-fc0d-4b4f-b6bd-59ca343c1d08]: FINISHED"}}
[debug] [2023-01-06T08:43:26.806Z] Jan 06, 2023 9:43:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:43:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:43:26.807Z] Jan 06, 2023 9:43:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:43:26 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:43:27.172Z] Jan 06, 2023 9:43:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:43:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:43:27.194Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:43:27.194Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:43:27.194Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:43:27.194Z"],"workRunningCount":1}
[debug] [2023-01-06T08:43:27.194Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:43:27.197Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:43:27.197Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:43:27.197Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:43:27.204Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:43:27.205Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:43:27.767Z] [runtime-status] [2408] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:43:27.767Z] [runtime-status] [2408] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:43:27.767Z] [runtime-status] [2408] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:43:27.768Z] [runtime-status] [2408] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:43:27.886Z] [runtime-status] [2408] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:43:27.886Z] [runtime-status] [2408] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:43:27.886Z] [runtime-status] [2408] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:43:27.886Z] [runtime-status] [2408] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:43:27.887Z] [runtime-status] [2408] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:43:27.887Z] [runtime-status] [2408] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:43:27.888Z] [runtime-status] [2408] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:43:27.893Z] [runtime-status] [2408] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:43:27.893Z] [runtime-status] [2408] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_92b0abe1f9cd7390.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_92b0abe1f9cd7390.sock"}}
[debug] [2023-01-06T08:43:27.917Z] [worker-us-central1-updateTokenUser-88bf5f06-03db-4d0a-a438-a1c437671f64]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-88bf5f06-03db-4d0a-a438-a1c437671f64]: IDLE"}}
[debug] [2023-01-06T08:43:27.917Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:43:27.917Z] [worker-us-central1-updateTokenUser-88bf5f06-03db-4d0a-a438-a1c437671f64]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-88bf5f06-03db-4d0a-a438-a1c437671f64]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:43:27.923Z] [runtime-status] [2408] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:43:27.923Z] [runtime-status] [2408] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","fields":{"uid":{"stringValue":"UmoXhiY1e44fKq8YstxI"},"type":{"stringValue":"Admin"},"tokens":{"arrayValue":{"values":[{"stringValue":"alalal"},{"stringValue":"merde"},{"stringValue":"ferland mendy"},{"stringValue":"kbnueve"},{"stringValue":"camavinga"},{"stringValue":"maes"}]}}},"createTime":"2023-01-06T08:39:05.535058Z","updateTime":"2023-01-06T08:43:27.181610Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI","fields":{"uid":{"stringValue":"UmoXhiY1e44fKq8YstxI"},"type":{"stringValue":"Admin"},"tokens":{"arrayValue":{"values":[{"stringValue":"alalal"},{"stringValue":"merde"},{"stringValue":"ferland mendy"},{"stringValue":"kbnueve"},{"stringValue":"camavinga"}]}}},"createTime":"2023-01-06T08:39:05.535058Z","updateTime":"2023-01-06T08:42:56.785756Z"},"updateMask":{}},"context":{"eventId":"2fafac9c-d430-463f-a955-51f7f8c858ac","timestamp":"2023-01-06T08:43:27.181Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2408] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"fields\":{\"uid\":{\"stringValue\":\"UmoXhiY1e44fKq8YstxI\"},\"type\":{\"stringValue\":\"Admin\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"alalal\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"ferland mendy\"},{\"stringValue\":\"kbnueve\"},{\"stringValue\":\"camavinga\"},{\"stringValue\":\"maes\"}]}}},\"createTime\":\"2023-01-06T08:39:05.535058Z\",\"updateTime\":\"2023-01-06T08:43:27.181610Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\",\"fields\":{\"uid\":{\"stringValue\":\"UmoXhiY1e44fKq8YstxI\"},\"type\":{\"stringValue\":\"Admin\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"alalal\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"ferland mendy\"},{\"stringValue\":\"kbnueve\"},{\"stringValue\":\"camavinga\"}]}}},\"createTime\":\"2023-01-06T08:39:05.535058Z\",\"updateTime\":\"2023-01-06T08:42:56.785756Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"2fafac9c-d430-463f-a955-51f7f8c858ac\",\"timestamp\":\"2023-01-06T08:43:27.181Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/UmoXhiY1e44fKq8YstxI\"}}"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:43:27.926Z] [worker-us-central1-updateTokenUser-88bf5f06-03db-4d0a-a438-a1c437671f64]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-88bf5f06-03db-4d0a-a438-a1c437671f64]: IDLE"}}
[debug] [2023-01-06T08:43:27.927Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 3.143292ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 3.143292ms"}}
[debug] [2023-01-06T08:43:28.073Z] Jan 06, 2023 9:43:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:43:28 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon' {"user":"    'ptetre cest bon'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'UmoXhiY1e44fKq8YstxI', {"user":"  uid: 'UmoXhiY1e44fKq8YstxI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'UmoXhiY1e44fKq8YstxI',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'alalal', {"user":"    'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalal',"}}
[info] >      'merde', {"user":"    'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'merde',"}}
[info] >      'ferland mendy', {"user":"    'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ferland mendy',"}}
[info] >      'kbnueve', {"user":"    'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'kbnueve',"}}
[info] >      'camavinga', {"user":"    'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'camavinga',"}}
[info] >      'maes' {"user":"    'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'maes'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  TOKENS ALL [ {"user":"TOKENS ALL [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m TOKENS ALL ["}}
[info] >    [ {"user":"  [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon' {"user":"    'ptetre cest bon'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon'"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    [ {"user":"  [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ["}}
[info] >      'alalal', {"user":"    'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalal',"}}
[info] >      'merde', {"user":"    'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'merde',"}}
[info] >      'ferland mendy', {"user":"    'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ferland mendy',"}}
[info] >      'kbnueve', {"user":"    'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'kbnueve',"}}
[info] >      'camavinga', {"user":"    'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'camavinga',"}}
[info] >      'maes' {"user":"    'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'maes'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  ] 2 {"user":"] 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m ] 2"}}
[debug] [2023-01-06T08:44:07.470Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:44:08.475Z] Validating nodejs source
[debug] [2023-01-06T08:44:08.792Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:44:08.792Z] Building nodejs source
[debug] [2023-01-06T08:44:08.792Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:44:08.893Z] Serving at port 9005

[debug] [2023-01-06T08:44:09.010Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:44:09.012Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:44:09.016Z] [worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:44:09.016Z] [worker-us-central1-updateTokenUser-88bf5f06-03db-4d0a-a438-a1c437671f64]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-88bf5f06-03db-4d0a-a438-a1c437671f64]: FINISHING"}}
[debug] [2023-01-06T08:44:09.019Z] [worker-us-central1-updateTokenUser-88bf5f06-03db-4d0a-a438-a1c437671f64]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-88bf5f06-03db-4d0a-a438-a1c437671f64]: exited"}}
[debug] [2023-01-06T08:44:09.019Z] [worker-us-central1-updateTokenUser-88bf5f06-03db-4d0a-a438-a1c437671f64]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-88bf5f06-03db-4d0a-a438-a1c437671f64]: FINISHED"}}
[debug] [2023-01-06T08:44:21.121Z] Jan 06, 2023 9:44:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:44:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:44:21.136Z] Jan 06, 2023 9:44:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:44:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:44:21.138Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:44:21.138Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:44:21.138Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:44:21.138Z"],"workRunningCount":1}
[debug] [2023-01-06T08:44:21.138Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:44:21.141Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:44:21.142Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:44:21.142Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:44:21.146Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:44:21.147Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:44:21.148Z] Jan 06, 2023 9:44:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:44:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:44:21.715Z] [runtime-status] [2424] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:44:21.715Z] [runtime-status] [2424] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:44:21.715Z] [runtime-status] [2424] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:44:21.716Z] [runtime-status] [2424] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:44:21.834Z] [runtime-status] [2424] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:44:21.834Z] [runtime-status] [2424] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:44:21.834Z] [runtime-status] [2424] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:44:21.834Z] [runtime-status] [2424] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:44:21.835Z] [runtime-status] [2424] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:44:21.835Z] [runtime-status] [2424] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:44:21.836Z] [runtime-status] [2424] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:44:21.841Z] [runtime-status] [2424] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:44:21.841Z] [runtime-status] [2424] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_a9e96b77313d3c5e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_a9e96b77313d3c5e.sock"}}
[debug] [2023-01-06T08:44:21.857Z] [worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: IDLE"}}
[debug] [2023-01-06T08:44:21.857Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:44:21.857Z] [worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:44:21.863Z] [runtime-status] [2424] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:44:21.863Z] [runtime-status] [2424] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","fields":{"uid":{"stringValue":"7BDcCsXJCyVV6V5EXgE4"},"type":{"stringValue":"Admin"},"tokens":{"arrayValue":{"values":[{"stringValue":"fjkldsnfjkldafnks"},{"stringValue":"alalalalalala"},{"stringValue":"meeeeerde"},{"stringValue":"putain"},{"stringValue":"ptetre cest bon"},{"stringValue":"rohff"}]}}},"createTime":"2023-01-06T08:34:31.452001Z","updateTime":"2023-01-06T08:44:21.131259Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4","fields":{"uid":{"stringValue":"7BDcCsXJCyVV6V5EXgE4"},"type":{"stringValue":"Admin"},"tokens":{"arrayValue":{"values":[{"stringValue":"fjkldsnfjkldafnks"},{"stringValue":"alalalalalala"},{"stringValue":"meeeeerde"},{"stringValue":"putain"},{"stringValue":"ptetre cest bon"}]}}},"createTime":"2023-01-06T08:34:31.452001Z","updateTime":"2023-01-06T08:37:27.502061Z"},"updateMask":{}},"context":{"eventId":"89d4c0e1-ddf7-4cf7-827f-0aea5b5606a9","timestamp":"2023-01-06T08:44:21.131Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"fields\":{\"uid\":{\"stringValue\":\"7BDcCsXJCyVV6V5EXgE4\"},\"type\":{\"stringValue\":\"Admin\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"fjkldsnfjkldafnks\"},{\"stringValue\":\"alalalalalala\"},{\"stringValue\":\"meeeeerde\"},{\"stringValue\":\"putain\"},{\"stringValue\":\"ptetre cest bon\"},{\"stringValue\":\"rohff\"}]}}},\"createTime\":\"2023-01-06T08:34:31.452001Z\",\"updateTime\":\"2023-01-06T08:44:21.131259Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\",\"fields\":{\"uid\":{\"stringValue\":\"7BDcCsXJCyVV6V5EXgE4\"},\"type\":{\"stringValue\":\"Admin\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"fjkldsnfjkldafnks\"},{\"stringValue\":\"alalalalalala\"},{\"stringValue\":\"meeeeerde\"},{\"stringValue\":\"putain\"},{\"stringValue\":\"ptetre cest bon\"}]}}},\"createTime\":\"2023-01-06T08:34:31.452001Z\",\"updateTime\":\"2023-01-06T08:37:27.502061Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"89d4c0e1-ddf7-4cf7-827f-0aea5b5606a9\",\"timestamp\":\"2023-01-06T08:44:21.131Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/7BDcCsXJCyVV6V5EXgE4\"}}"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:44:21.866Z] [worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: IDLE"}}
[debug] [2023-01-06T08:44:21.866Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 3.052041ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 3.052041ms"}}
[debug] [2023-01-06T08:44:22.021Z] Jan 06, 2023 9:44:22 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:44:22 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon', {"user":"    'ptetre cest bon',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon',"}}
[info] >      'rohff' {"user":"    'rohff'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'rohff'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'UmoXhiY1e44fKq8YstxI', {"user":"  uid: 'UmoXhiY1e44fKq8YstxI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'UmoXhiY1e44fKq8YstxI',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'alalal', {"user":"    'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalal',"}}
[info] >      'merde', {"user":"    'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'merde',"}}
[info] >      'ferland mendy', {"user":"    'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ferland mendy',"}}
[info] >      'kbnueve', {"user":"    'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'kbnueve',"}}
[info] >      'camavinga', {"user":"    'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'camavinga',"}}
[info] >      'maes' {"user":"    'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'maes'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  TOKENS ALL [ {"user":"TOKENS ALL [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m TOKENS ALL ["}}
[info] >    'fjkldsnfjkldafnks', {"user":"  'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'fjkldsnfjkldafnks',"}}
[info] >    'alalalalalala', {"user":"  'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'alalalalalala',"}}
[info] >    'meeeeerde', {"user":"  'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'meeeeerde',"}}
[info] >    'putain', {"user":"  'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'putain',"}}
[info] >    'ptetre cest bon', {"user":"  'ptetre cest bon',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'ptetre cest bon',"}}
[info] >    'rohff', {"user":"  'rohff',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'rohff',"}}
[info] >    'alalal', {"user":"  'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'alalal',"}}
[info] >    'merde', {"user":"  'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'merde',"}}
[info] >    'ferland mendy', {"user":"  'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'ferland mendy',"}}
[info] >    'kbnueve', {"user":"  'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'kbnueve',"}}
[info] >    'camavinga', {"user":"  'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'camavinga',"}}
[info] >    'maes' {"user":"  'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'maes'"}}
[info] >  ] 12 {"user":"] 12","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m ] 12"}}
[debug] [2023-01-06T08:45:04.546Z] Jan 06, 2023 9:45:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:45:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:45:04.575Z] Jan 06, 2023 9:45:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:45:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:45:16.438Z] Jan 06, 2023 9:45:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:45:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:45:16.451Z] Jan 06, 2023 9:45:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:45:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:45:16.453Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:45:16.453Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:45:16.454Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:45:16.453Z"],"workRunningCount":1}
[debug] [2023-01-06T08:45:16.454Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:45:16.458Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:45:16.458Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:45:16.458Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:45:16.459Z] [worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: BUSY"}}
[debug] [2023-01-06T08:45:16.459Z] Jan 06, 2023 9:45:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:45:16 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:45:16.464Z] [runtime-status] [2424] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:45:16.464Z] [runtime-status] [2424] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:45:16.446372Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:45:04.555873Z"},"updateMask":{}},"context":{"eventId":"0d63c9f8-d367-4587-b165-d233f26e0a80","timestamp":"2023-01-06T08:45:16.446Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2424] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:45:16.446372Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:45:04.555873Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"0d63c9f8-d367-4587-b165-d233f26e0a80\",\"timestamp\":\"2023-01-06T08:45:16.446Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\"}}"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:45:16.465Z] [worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: IDLE"}}
[debug] [2023-01-06T08:45:16.465Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 1.861125ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 1.861125ms"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon', {"user":"    'ptetre cest bon',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon',"}}
[info] >      'rohff' {"user":"    'rohff'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'rohff'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'UmoXhiY1e44fKq8YstxI', {"user":"  uid: 'UmoXhiY1e44fKq8YstxI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'UmoXhiY1e44fKq8YstxI',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'alalal', {"user":"    'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalal',"}}
[info] >      'merde', {"user":"    'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'merde',"}}
[info] >      'ferland mendy', {"user":"    'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ferland mendy',"}}
[info] >      'kbnueve', {"user":"    'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'kbnueve',"}}
[info] >      'camavinga', {"user":"    'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'camavinga',"}}
[info] >      'maes' {"user":"    'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'maes'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  TOKENS ALL [ {"user":"TOKENS ALL [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m TOKENS ALL ["}}
[info] >    'fjkldsnfjkldafnks', {"user":"  'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'fjkldsnfjkldafnks',"}}
[info] >    'alalalalalala', {"user":"  'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'alalalalalala',"}}
[info] >    'meeeeerde', {"user":"  'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'meeeeerde',"}}
[info] >    'putain', {"user":"  'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'putain',"}}
[info] >    'ptetre cest bon', {"user":"  'ptetre cest bon',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'ptetre cest bon',"}}
[info] >    'rohff', {"user":"  'rohff',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'rohff',"}}
[info] >    'alalal', {"user":"  'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'alalal',"}}
[info] >    'merde', {"user":"  'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'merde',"}}
[info] >    'ferland mendy', {"user":"  'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'ferland mendy',"}}
[info] >    'kbnueve', {"user":"  'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'kbnueve',"}}
[info] >    'camavinga', {"user":"  'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'camavinga',"}}
[info] >    'maes' {"user":"  'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'maes'"}}
[info] >  ] 12 {"user":"] 12","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m ] 12"}}
[debug] [2023-01-06T08:45:41.948Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:45:42.951Z] Validating nodejs source
[debug] [2023-01-06T08:45:43.279Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:45:43.279Z] Building nodejs source
[debug] [2023-01-06T08:45:43.280Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:45:43.382Z] Serving at port 9005

[debug] [2023-01-06T08:45:43.517Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:45:43.520Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:45:43.522Z] [worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:45:43.523Z] [worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: FINISHING"}}
[debug] [2023-01-06T08:45:43.528Z] [worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: exited"}}
[debug] [2023-01-06T08:45:43.528Z] [worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-9e8da289-ca4b-4c8c-a99f-abc26f579db0]: FINISHED"}}
[debug] [2023-01-06T08:45:50.514Z] Jan 06, 2023 9:45:50 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:45:50 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:45:50.535Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:45:50.535Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:45:50.536Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:45:50.535Z"],"workRunningCount":1}
[debug] [2023-01-06T08:45:50.536Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:45:50.539Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:45:50.539Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:45:50.539Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:45:50.545Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:45:50.546Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:45:51.118Z] [runtime-status] [2446] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:45:51.118Z] [runtime-status] [2446] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:45:51.119Z] [runtime-status] [2446] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:45:51.119Z] [runtime-status] [2446] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:45:51.216Z] [runtime-status] [2446] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:45:51.216Z] [runtime-status] [2446] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:45:51.216Z] [runtime-status] [2446] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:45:51.216Z] [runtime-status] [2446] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:45:51.217Z] [runtime-status] [2446] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:45:51.217Z] [runtime-status] [2446] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:45:51.218Z] [runtime-status] [2446] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:45:51.223Z] [runtime-status] [2446] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:45:51.223Z] [runtime-status] [2446] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_76600245b29c61e4.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_76600245b29c61e4.sock"}}
[debug] [2023-01-06T08:45:51.257Z] [worker-us-central1-updateTokenUser-cba55579-1f02-4185-bc6d-8741d70e3364]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-cba55579-1f02-4185-bc6d-8741d70e3364]: IDLE"}}
[debug] [2023-01-06T08:45:51.257Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:45:51.257Z] [worker-us-central1-updateTokenUser-cba55579-1f02-4185-bc6d-8741d70e3364]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-cba55579-1f02-4185-bc6d-8741d70e3364]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:45:51.265Z] [runtime-status] [2446] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:45:51.265Z] [runtime-status] [2446] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"},{"stringValue":"anvien"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:45:50.525212Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:45:16.446372Z"},"updateMask":{}},"context":{"eventId":"bf961e92-3b9f-49f5-b1e4-118ac48bc2d3","timestamp":"2023-01-06T08:45:50.525Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2446] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"},{\"stringValue\":\"anvien\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:45:50.525212Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:45:16.446372Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"bf961e92-3b9f-49f5-b1e4-118ac48bc2d3\",\"timestamp\":\"2023-01-06T08:45:50.525Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\"}}"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:45:51.268Z] [worker-us-central1-updateTokenUser-cba55579-1f02-4185-bc6d-8741d70e3364]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-cba55579-1f02-4185-bc6d-8741d70e3364]: IDLE"}}
[debug] [2023-01-06T08:45:51.268Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 3.154458ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 3.154458ms"}}
[debug] [2023-01-06T08:45:51.418Z] Jan 06, 2023 9:45:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:45:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  TOKENS ALL [] 0 {"user":"TOKENS ALL [] 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m TOKENS ALL [] 0"}}
[debug] [2023-01-06T08:46:20.540Z] Jan 06, 2023 9:46:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:46:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:46:20.544Z] Jan 06, 2023 9:46:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:46:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:46:51.954Z] Jan 06, 2023 9:46:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:46:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:46:51.970Z] Jan 06, 2023 9:46:51 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:46:51 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2023-01-06T08:47:20.563Z] Jan 06, 2023 9:47:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:47:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:47:27.217Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:47:28.220Z] Validating nodejs source
[debug] [2023-01-06T08:47:28.577Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:47:28.577Z] Building nodejs source
[debug] [2023-01-06T08:47:28.578Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:47:28.677Z] Serving at port 9005

[debug] [2023-01-06T08:47:28.811Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:47:28.814Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:47:28.819Z] [worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:47:28.819Z] [worker-us-central1-updateTokenUser-cba55579-1f02-4185-bc6d-8741d70e3364]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-cba55579-1f02-4185-bc6d-8741d70e3364]: FINISHING"}}
[debug] [2023-01-06T08:47:28.825Z] [worker-us-central1-updateTokenUser-cba55579-1f02-4185-bc6d-8741d70e3364]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-cba55579-1f02-4185-bc6d-8741d70e3364]: exited"}}
[debug] [2023-01-06T08:47:28.825Z] [worker-us-central1-updateTokenUser-cba55579-1f02-4185-bc6d-8741d70e3364]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-cba55579-1f02-4185-bc6d-8741d70e3364]: FINISHED"}}
[debug] [2023-01-06T08:47:36.755Z] Jan 06, 2023 9:47:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:47:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:47:36.765Z] Jan 06, 2023 9:47:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:47:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:47:36.769Z] Jan 06, 2023 9:47:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:47:36 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:47:36.786Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:47:36.786Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:47:36.786Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:47:36.786Z"],"workRunningCount":1}
[debug] [2023-01-06T08:47:36.786Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:47:36.788Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:47:36.789Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:47:36.789Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:47:36.793Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:47:36.794Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:47:37.371Z] [runtime-status] [2466] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:47:37.372Z] [runtime-status] [2466] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:47:37.372Z] [runtime-status] [2466] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:47:37.372Z] [runtime-status] [2466] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:47:37.475Z] [runtime-status] [2466] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:47:37.475Z] [runtime-status] [2466] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:47:37.475Z] [runtime-status] [2466] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:47:37.476Z] [runtime-status] [2466] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:47:37.477Z] [runtime-status] [2466] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:47:37.477Z] [runtime-status] [2466] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:47:37.477Z] [runtime-status] [2466] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:47:37.483Z] [runtime-status] [2466] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:47:37.483Z] [runtime-status] [2466] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_ebacfaaa974bea38.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_ebacfaaa974bea38.sock"}}
[debug] [2023-01-06T08:47:37.505Z] [worker-us-central1-updateTokenUser-75497a52-dd90-422b-bac9-74820c63b36e]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-75497a52-dd90-422b-bac9-74820c63b36e]: IDLE"}}
[debug] [2023-01-06T08:47:37.505Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:47:37.505Z] [worker-us-central1-updateTokenUser-75497a52-dd90-422b-bac9-74820c63b36e]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-75497a52-dd90-422b-bac9-74820c63b36e]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:47:37.510Z] [runtime-status] [2466] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:47:37.510Z] [runtime-status] [2466] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"},{"stringValue":"anvien"},{"stringValue":"merde"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:47:36.778716Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"},{"stringValue":"anvien"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:45:50.525212Z"},"updateMask":{}},"context":{"eventId":"5834ce6d-c05e-4ba0-8fa4-7e3cf87de1e7","timestamp":"2023-01-06T08:47:36.778Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2466] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"},{\"stringValue\":\"anvien\"},{\"stringValue\":\"merde\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:47:36.778716Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"},{\"stringValue\":\"anvien\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:45:50.525212Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"5834ce6d-c05e-4ba0-8fa4-7e3cf87de1e7\",\"timestamp\":\"2023-01-06T08:47:36.778Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\"}}"}}
[info] >  TOKENS ALL Promise { <pending> } undefined {"user":"TOKENS ALL Promise { <pending> } undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m TOKENS ALL Promise { <pending> } undefined"}}
[info] >  {"severity":"WARNING","message":"Function returned undefined, expected Promise or value"} {"user":{"severity":"WARNING","message":"Function returned undefined, expected Promise or value"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"severity\":\"WARNING\",\"message\":\"Function returned undefined, expected Promise or value\"}"}}
[debug] [2023-01-06T08:47:37.514Z] [worker-us-central1-updateTokenUser-75497a52-dd90-422b-bac9-74820c63b36e]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-75497a52-dd90-422b-bac9-74820c63b36e]: IDLE"}}
[debug] [2023-01-06T08:47:37.514Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 3.612083ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 3.612083ms"}}
[debug] [2023-01-06T08:47:37.655Z] Jan 06, 2023 9:47:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:47:37 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon', {"user":"    'ptetre cest bon',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon',"}}
[info] >      'rohff' {"user":"    'rohff'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'rohff'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'UmoXhiY1e44fKq8YstxI', {"user":"  uid: 'UmoXhiY1e44fKq8YstxI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'UmoXhiY1e44fKq8YstxI',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'alalal', {"user":"    'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalal',"}}
[info] >      'merde', {"user":"    'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'merde',"}}
[info] >      'ferland mendy', {"user":"    'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ferland mendy',"}}
[info] >      'kbnueve', {"user":"    'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'kbnueve',"}}
[info] >      'camavinga', {"user":"    'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'camavinga',"}}
[info] >      'maes' {"user":"    'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'maes'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-01-06T08:47:59.852Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:48:00.855Z] Validating nodejs source
[debug] [2023-01-06T08:48:01.189Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:48:01.189Z] Building nodejs source
[debug] [2023-01-06T08:48:01.189Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:48:01.281Z] Serving at port 9005

[debug] [2023-01-06T08:48:01.390Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:48:01.393Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:48:01.398Z] [worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:48:01.398Z] [worker-us-central1-updateTokenUser-75497a52-dd90-422b-bac9-74820c63b36e]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-75497a52-dd90-422b-bac9-74820c63b36e]: FINISHING"}}
[debug] [2023-01-06T08:48:01.402Z] [worker-us-central1-updateTokenUser-75497a52-dd90-422b-bac9-74820c63b36e]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-75497a52-dd90-422b-bac9-74820c63b36e]: exited"}}
[debug] [2023-01-06T08:48:01.402Z] [worker-us-central1-updateTokenUser-75497a52-dd90-422b-bac9-74820c63b36e]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-75497a52-dd90-422b-bac9-74820c63b36e]: FINISHED"}}
[debug] [2023-01-06T08:48:06.799Z] Jan 06, 2023 9:48:06 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:48:06 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:48:08.142Z] Jan 06, 2023 9:48:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:48:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:48:08.161Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:48:08.161Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:48:08.162Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:48:08.161Z"],"workRunningCount":1}
[debug] [2023-01-06T08:48:08.162Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:48:08.166Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:48:08.166Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:48:08.166Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:48:08.172Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:48:08.173Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:48:08.672Z] [runtime-status] [2479] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:48:08.673Z] [runtime-status] [2479] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:48:08.673Z] [runtime-status] [2479] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:48:08.673Z] [runtime-status] [2479] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:48:08.792Z] [runtime-status] [2479] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:48:08.792Z] [runtime-status] [2479] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:48:08.793Z] [runtime-status] [2479] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:48:08.793Z] [runtime-status] [2479] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:48:08.794Z] [runtime-status] [2479] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:48:08.794Z] [runtime-status] [2479] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:48:08.795Z] [runtime-status] [2479] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:48:08.800Z] [runtime-status] [2479] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:48:08.800Z] [runtime-status] [2479] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_fba7a36aa9c81331.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_fba7a36aa9c81331.sock"}}
[debug] [2023-01-06T08:48:08.887Z] [worker-us-central1-updateTokenUser-385cab77-9368-4fce-a2d7-38e2d8b6a175]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-385cab77-9368-4fce-a2d7-38e2d8b6a175]: IDLE"}}
[debug] [2023-01-06T08:48:08.887Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:48:08.887Z] [worker-us-central1-updateTokenUser-385cab77-9368-4fce-a2d7-38e2d8b6a175]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-385cab77-9368-4fce-a2d7-38e2d8b6a175]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:48:08.895Z] [runtime-status] [2479] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:48:08.896Z] [runtime-status] [2479] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"},{"stringValue":"anvien"},{"stringValue":"merde"},{"stringValue":"mamamama"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:48:08.152116Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"},{"stringValue":"anvien"},{"stringValue":"merde"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:47:36.778716Z"},"updateMask":{}},"context":{"eventId":"5f7085c8-6b82-4690-83a4-112eeaed31df","timestamp":"2023-01-06T08:48:08.152Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2479] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"},{\"stringValue\":\"anvien\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"mamamama\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:48:08.152116Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"},{\"stringValue\":\"anvien\"},{\"stringValue\":\"merde\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:47:36.778716Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"5f7085c8-6b82-4690-83a4-112eeaed31df\",\"timestamp\":\"2023-01-06T08:48:08.152Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\"}}"}}
[debug] [2023-01-06T08:48:09.043Z] Jan 06, 2023 9:48:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:48:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon', {"user":"    'ptetre cest bon',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon',"}}
[info] >      'rohff' {"user":"    'rohff'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'rohff'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'UmoXhiY1e44fKq8YstxI', {"user":"  uid: 'UmoXhiY1e44fKq8YstxI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'UmoXhiY1e44fKq8YstxI',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'alalal', {"user":"    'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalal',"}}
[info] >      'merde', {"user":"    'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'merde',"}}
[info] >      'ferland mendy', {"user":"    'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ferland mendy',"}}
[info] >      'kbnueve', {"user":"    'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'kbnueve',"}}
[info] >      'camavinga', {"user":"    'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'camavinga',"}}
[info] >      'maes' {"user":"    'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'maes'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  TOKENS ALL [ {"user":"TOKENS ALL [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m TOKENS ALL ["}}
[info] >    'fjkldsnfjkldafnks', {"user":"  'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'fjkldsnfjkldafnks',"}}
[info] >    'alalalalalala', {"user":"  'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'alalalalalala',"}}
[info] >    'meeeeerde', {"user":"  'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'meeeeerde',"}}
[info] >    'putain', {"user":"  'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'putain',"}}
[info] >    'ptetre cest bon', {"user":"  'ptetre cest bon',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'ptetre cest bon',"}}
[info] >    'rohff', {"user":"  'rohff',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'rohff',"}}
[info] >    'alalal', {"user":"  'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'alalal',"}}
[info] >    'merde', {"user":"  'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'merde',"}}
[info] >    'ferland mendy', {"user":"  'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'ferland mendy',"}}
[info] >    'kbnueve', {"user":"  'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'kbnueve',"}}
[info] >    'camavinga', {"user":"  'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'camavinga',"}}
[info] >    'maes' {"user":"  'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'maes'"}}
[info] >  ] 12 {"user":"] 12","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m ] 12"}}
[debug] [2023-01-06T08:48:09.053Z] [worker-us-central1-updateTokenUser-385cab77-9368-4fce-a2d7-38e2d8b6a175]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-385cab77-9368-4fce-a2d7-38e2d8b6a175]: IDLE"}}
[debug] [2023-01-06T08:48:09.053Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 155.255708ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 155.255708ms"}}
[debug] [2023-01-06T08:48:38.171Z] Jan 06, 2023 9:48:38 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:48:38 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:49:08.180Z] Jan 06, 2023 9:49:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:49:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:49:08.633Z] Jan 06, 2023 9:49:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:49:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:49:08.634Z] Jan 06, 2023 9:49:08 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:49:08 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2023-01-06T08:49:57.316Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:49:58.320Z] Validating nodejs source
[debug] [2023-01-06T08:49:58.693Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:49:58.693Z] Building nodejs source
[debug] [2023-01-06T08:49:58.694Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:49:58.792Z] Serving at port 9005

[debug] [2023-01-06T08:49:58.922Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:49:58.924Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:49:58.930Z] [worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:49:58.930Z] [worker-us-central1-updateTokenUser-385cab77-9368-4fce-a2d7-38e2d8b6a175]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-385cab77-9368-4fce-a2d7-38e2d8b6a175]: FINISHING"}}
[debug] [2023-01-06T08:49:58.935Z] [worker-us-central1-updateTokenUser-385cab77-9368-4fce-a2d7-38e2d8b6a175]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-385cab77-9368-4fce-a2d7-38e2d8b6a175]: exited"}}
[debug] [2023-01-06T08:49:58.935Z] [worker-us-central1-updateTokenUser-385cab77-9368-4fce-a2d7-38e2d8b6a175]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-385cab77-9368-4fce-a2d7-38e2d8b6a175]: FINISHED"}}
[debug] [2023-01-06T08:50:04.838Z] Jan 06, 2023 9:50:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:50:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:50:04.851Z] Jan 06, 2023 9:50:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:50:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:50:04.856Z] Jan 06, 2023 9:50:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:50:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:50:04.867Z] Jan 06, 2023 9:50:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:50:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:50:04.870Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:50:04.870Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:50:04.871Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:50:04.870Z"],"workRunningCount":1}
[debug] [2023-01-06T08:50:04.871Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:50:04.873Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:50:04.874Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:50:04.874Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:50:04.878Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:50:04.878Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:50:05.445Z] [runtime-status] [2496] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:50:05.446Z] [runtime-status] [2496] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:50:05.446Z] [runtime-status] [2496] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:50:05.446Z] [runtime-status] [2496] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:50:05.547Z] [runtime-status] [2496] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:50:05.547Z] [runtime-status] [2496] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:50:05.547Z] [runtime-status] [2496] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:50:05.547Z] [runtime-status] [2496] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:50:05.548Z] [runtime-status] [2496] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:50:05.548Z] [runtime-status] [2496] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:50:05.549Z] [runtime-status] [2496] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:50:05.554Z] [runtime-status] [2496] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:50:05.554Z] [runtime-status] [2496] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_03c7a3c4daf1d335.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_03c7a3c4daf1d335.sock"}}
[debug] [2023-01-06T08:50:05.591Z] [worker-us-central1-updateTokenUser-146d69b5-cb4a-4699-a45c-49eee3e77ef3]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-146d69b5-cb4a-4699-a45c-49eee3e77ef3]: IDLE"}}
[debug] [2023-01-06T08:50:05.591Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:50:05.591Z] [worker-us-central1-updateTokenUser-146d69b5-cb4a-4699-a45c-49eee3e77ef3]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-146d69b5-cb4a-4699-a45c-49eee3e77ef3]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:50:05.597Z] [runtime-status] [2496] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:50:05.597Z] [runtime-status] [2496] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"},{"stringValue":"anvien"},{"stringValue":"merde"},{"stringValue":"mamamama"},{"stringValue":"mamaam"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:50:04.862776Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"},{"stringValue":"anvien"},{"stringValue":"merde"},{"stringValue":"mamamama"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:48:08.152116Z"},"updateMask":{}},"context":{"eventId":"b3ef29bf-32f0-4be5-ab59-985e390eacc7","timestamp":"2023-01-06T08:50:04.862Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2496] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"},{\"stringValue\":\"anvien\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"mamamama\"},{\"stringValue\":\"mamaam\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:50:04.862776Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"},{\"stringValue\":\"anvien\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"mamamama\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:48:08.152116Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"b3ef29bf-32f0-4be5-ab59-985e390eacc7\",\"timestamp\":\"2023-01-06T08:50:04.862Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\"}}"}}
[debug] [2023-01-06T08:50:05.744Z] Jan 06, 2023 9:50:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:50:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon', {"user":"    'ptetre cest bon',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon',"}}
[info] >      'rohff' {"user":"    'rohff'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'rohff'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'UmoXhiY1e44fKq8YstxI', {"user":"  uid: 'UmoXhiY1e44fKq8YstxI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'UmoXhiY1e44fKq8YstxI',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'alalal', {"user":"    'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalal',"}}
[info] >      'merde', {"user":"    'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'merde',"}}
[info] >      'ferland mendy', {"user":"    'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ferland mendy',"}}
[info] >      'kbnueve', {"user":"    'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'kbnueve',"}}
[info] >      'camavinga', {"user":"    'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'camavinga',"}}
[info] >      'maes' {"user":"    'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'maes'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[warn] ⚠  functions: TypeError: Cannot read properties of undefined (reading 'length')
    at /Users/couzmec/DANDELA/dandela-web-app/functions/index.js:77:74
    at processTicksAndRejections (node:internal/process/task_queues:96:5)
    at async runFunction (/usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:504:9)
    at async runBackground (/usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:515:5)
    at async processBackground (/usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:499:5)
    at async /usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:21 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"TypeError: Cannot read properties of undefined (reading 'length')\n    at /Users/couzmec/DANDELA/dandela-web-app/functions/index.js:77:74\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at async runFunction (/usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:504:9)\n    at async runBackground (/usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:515:5)\n    at async processBackground (/usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:499:5)\n    at async /usr/local/lib/node_modules/firebase-tools/lib/emulator/functionsEmulatorRuntime.js:690:21"}}
[warn] ⚠  Your function was killed because it raised an unhandled error. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Your function was killed because it raised an unhandled error."}}
[info] i  functions: Finished "updateTokenUser" in 154.176792ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 154.176792ms"}}
[debug] [2023-01-06T08:50:05.752Z] [worker-us-central1-updateTokenUser-146d69b5-cb4a-4699-a45c-49eee3e77ef3]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-146d69b5-cb4a-4699-a45c-49eee3e77ef3]: IDLE"}}
[debug] [2023-01-06T08:50:05.752Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:50:05.753Z] Jan 06, 2023 9:50:05 AM com.google.cloud.datastore.emulator.impl.events.FunctionsEmulatorEventPublisher sendHttpRequest
WARNING: Unsuccessful HTTP response when publishing event for projects/dandelawebapp/triggers/us-central1-updateTokenUser-0: 500 Internal Server Error
Cannot read properties of undefined (reading 'length')
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:50:05 AM com.google.cloud.datastore.emulator.impl.events.FunctionsEmulatorEventPublisher sendHttpRequest\nWARNING: Unsuccessful HTTP response when publishing event for projects/dandelawebapp/triggers/us-central1-updateTokenUser-0: 500 Internal Server Error\nCannot read properties of undefined (reading 'length')\n"}}
[debug] [2023-01-06T08:50:05.755Z] [worker-us-central1-updateTokenUser-146d69b5-cb4a-4699-a45c-49eee3e77ef3]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-146d69b5-cb4a-4699-a45c-49eee3e77ef3]: exited"}}
[debug] [2023-01-06T08:50:05.755Z] [worker-us-central1-updateTokenUser-146d69b5-cb4a-4699-a45c-49eee3e77ef3]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-146d69b5-cb4a-4699-a45c-49eee3e77ef3]: FINISHED"}}
[debug] [2023-01-06T08:50:58.543Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:50:59.547Z] Validating nodejs source
[debug] [2023-01-06T08:50:59.869Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:50:59.869Z] Building nodejs source
[debug] [2023-01-06T08:50:59.870Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:50:59.969Z] Serving at port 9005

[debug] [2023-01-06T08:51:00.113Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:51:00.115Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:51:04.191Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:51:04.887Z] Jan 06, 2023 9:51:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:51:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:51:04.887Z] Jan 06, 2023 9:51:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:51:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:51:05.193Z] Validating nodejs source
[debug] [2023-01-06T08:51:05.500Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:51:05.500Z] Building nodejs source
[debug] [2023-01-06T08:51:05.501Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:51:05.575Z] Serving at port 9005

[debug] [2023-01-06T08:51:05.644Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:51:05.646Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:51:05.789Z] Jan 06, 2023 9:51:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:51:05 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:51:05.791Z] Jan 06, 2023 9:51:05 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:51:05 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2023-01-06T08:51:34.180Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:51:35.181Z] Validating nodejs source
[debug] [2023-01-06T08:51:35.483Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:51:35.484Z] Building nodejs source
[debug] [2023-01-06T08:51:35.484Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:51:35.572Z] Serving at port 9005

[debug] [2023-01-06T08:51:35.682Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:51:35.684Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:51:43.808Z] Jan 06, 2023 9:51:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:51:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:51:43.817Z] Jan 06, 2023 9:51:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:51:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:51:43.821Z] Jan 06, 2023 9:51:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:51:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:51:43.834Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:51:43.834Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:51:43.834Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:51:43.834Z"],"workRunningCount":1}
[debug] [2023-01-06T08:51:43.834Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:51:43.837Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:51:43.837Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:51:43.838Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:51:43.841Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:51:43.842Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:51:44.405Z] [runtime-status] [2528] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:51:44.406Z] [runtime-status] [2528] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:51:44.406Z] [runtime-status] [2528] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:51:44.406Z] [runtime-status] [2528] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:51:44.540Z] [runtime-status] [2528] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:51:44.540Z] [runtime-status] [2528] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:51:44.540Z] [runtime-status] [2528] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:51:44.540Z] [runtime-status] [2528] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:51:44.541Z] [runtime-status] [2528] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:51:44.541Z] [runtime-status] [2528] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:51:44.542Z] [runtime-status] [2528] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:51:44.547Z] [runtime-status] [2528] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:51:44.547Z] [runtime-status] [2528] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_10ffcd35de6cbf6a.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_10ffcd35de6cbf6a.sock"}}
[debug] [2023-01-06T08:51:44.552Z] [worker-us-central1-updateTokenUser-fddf0194-15bb-4a6c-8985-91b9e2dd10fb]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-fddf0194-15bb-4a6c-8985-91b9e2dd10fb]: IDLE"}}
[debug] [2023-01-06T08:51:44.552Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:51:44.552Z] [worker-us-central1-updateTokenUser-fddf0194-15bb-4a6c-8985-91b9e2dd10fb]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-fddf0194-15bb-4a6c-8985-91b9e2dd10fb]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:51:44.558Z] [runtime-status] [2528] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:51:44.558Z] [runtime-status] [2528] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"},{"stringValue":"anvien"},{"stringValue":"merde"},{"stringValue":"mamamama"},{"stringValue":"mamaam"},{"stringValue":"fdpfdpfdasp"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:51:43.827800Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"},{"stringValue":"anvien"},{"stringValue":"merde"},{"stringValue":"mamamama"},{"stringValue":"mamaam"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:50:04.862776Z"},"updateMask":{}},"context":{"eventId":"d79ea113-3faf-4c31-9649-de12786ca85d","timestamp":"2023-01-06T08:51:43.827Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2528] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"},{\"stringValue\":\"anvien\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"mamamama\"},{\"stringValue\":\"mamaam\"},{\"stringValue\":\"fdpfdpfdasp\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:51:43.827800Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"},{\"stringValue\":\"anvien\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"mamamama\"},{\"stringValue\":\"mamaam\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:50:04.862776Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"d79ea113-3faf-4c31-9649-de12786ca85d\",\"timestamp\":\"2023-01-06T08:51:43.827Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\"}}"}}
[debug] [2023-01-06T08:51:44.711Z] Jan 06, 2023 9:51:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:51:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon', {"user":"    'ptetre cest bon',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon',"}}
[info] >      'rohff' {"user":"    'rohff'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'rohff'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'UmoXhiY1e44fKq8YstxI', {"user":"  uid: 'UmoXhiY1e44fKq8YstxI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'UmoXhiY1e44fKq8YstxI',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'alalal', {"user":"    'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalal',"}}
[info] >      'merde', {"user":"    'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'merde',"}}
[info] >      'ferland mendy', {"user":"    'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ferland mendy',"}}
[info] >      'kbnueve', {"user":"    'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'kbnueve',"}}
[info] >      'camavinga', {"user":"    'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'camavinga',"}}
[info] >      'maes' {"user":"    'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'maes'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  CONTXT { {"user":"CONTXT {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m CONTXT {"}}
[info] >    eventId: 'd79ea113-3faf-4c31-9649-de12786ca85d', {"user":"  eventId: 'd79ea113-3faf-4c31-9649-de12786ca85d',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   eventId: 'd79ea113-3faf-4c31-9649-de12786ca85d',"}}
[info] >    timestamp: '2023-01-06T08:51:43.827Z', {"user":"  timestamp: '2023-01-06T08:51:43.827Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2023-01-06T08:51:43.827Z',"}}
[info] >    eventType: 'google.firestore.document.update', {"user":"  eventType: 'google.firestore.document.update',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   eventType: 'google.firestore.document.update',"}}
[info] >    resource: { {"user":"  resource: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   resource: {"}}
[info] >      service: 'firestore.googleapis.com', {"user":"    service: 'firestore.googleapis.com',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     service: 'firestore.googleapis.com',"}}
[info] >      name: 'projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr' {"user":"    name: 'projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    params: { userId: 'BQNaPgprKcM0yDfVRetr' } {"user":"  params: { userId: 'BQNaPgprKcM0yDfVRetr' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   params: { userId: 'BQNaPgprKcM0yDfVRetr' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  TOKENS ALL [ {"user":"TOKENS ALL [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m TOKENS ALL ["}}
[info] >    'fjkldsnfjkldafnks', {"user":"  'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'fjkldsnfjkldafnks',"}}
[info] >    'alalalalalala', {"user":"  'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'alalalalalala',"}}
[info] >    'meeeeerde', {"user":"  'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'meeeeerde',"}}
[info] >    'putain', {"user":"  'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'putain',"}}
[info] >    'ptetre cest bon', {"user":"  'ptetre cest bon',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'ptetre cest bon',"}}
[info] >    'rohff', {"user":"  'rohff',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'rohff',"}}
[info] >    'alalal', {"user":"  'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'alalal',"}}
[info] >    'merde', {"user":"  'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'merde',"}}
[info] >    'ferland mendy', {"user":"  'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'ferland mendy',"}}
[info] >    'kbnueve', {"user":"  'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'kbnueve',"}}
[info] >    'camavinga', {"user":"  'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'camavinga',"}}
[info] >    'maes' {"user":"  'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'maes'"}}
[info] >  ] 12 {"user":"] 12","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m ] 12"}}
[debug] [2023-01-06T08:51:44.724Z] [worker-us-central1-updateTokenUser-fddf0194-15bb-4a6c-8985-91b9e2dd10fb]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-fddf0194-15bb-4a6c-8985-91b9e2dd10fb]: IDLE"}}
[debug] [2023-01-06T08:51:44.724Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 161.456667ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 161.456667ms"}}
[debug] [2023-01-06T08:52:13.835Z] Jan 06, 2023 9:52:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:52:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:52:43.856Z] Jan 06, 2023 9:52:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:52:43 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:52:44.803Z] Jan 06, 2023 9:52:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:52:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:52:44.808Z] Jan 06, 2023 9:52:44 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:52:44 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2023-01-06T08:53:07.950Z] File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/couzmec/DANDELA/dandela-web-app/functions/index.js changed, reloading triggers"}}
[debug] [2023-01-06T08:53:08.952Z] Validating nodejs source
[debug] [2023-01-06T08:53:09.480Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.1.1"
  },
  "devDependencies": {
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-01-06T08:53:09.480Z] Building nodejs source
[debug] [2023-01-06T08:53:09.481Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-01-06T08:53:09.588Z] Serving at port 9005

[debug] [2023-01-06T08:53:09.722Z] Got response from /__/functions.yaml {"endpoints":{"updateTokenUser":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.update","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/USER/{userId}"},"retry":false},"labels":{},"entryPoint":"updateTokenUser"},"createTransfer":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/TRANSFERT/{uid}"},"retry":false},"labels":{},"entryPoint":"createTransfer"},"addMessage":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"addMessage"},"makeUppercase":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.create","eventFilters":{"resource":"projects/dandelawebapp/databases/(default)/documents/messages/{documentId}"},"retry":false},"labels":{},"entryPoint":"makeUppercase"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[debug] [2023-01-06T08:53:09.724Z] shutdown requested via /__/quitquitquit

[info] ✔  functions: Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: updateTokenUser, createTransfer, addMessage, makeUppercase."}}
[debug] [2023-01-06T08:53:09.726Z] [worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:53:09.726Z] [worker-us-central1-updateTokenUser-fddf0194-15bb-4a6c-8985-91b9e2dd10fb]: FINISHING {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-fddf0194-15bb-4a6c-8985-91b9e2dd10fb]: FINISHING"}}
[debug] [2023-01-06T08:53:09.732Z] [worker-us-central1-updateTokenUser-fddf0194-15bb-4a6c-8985-91b9e2dd10fb]: exited {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-fddf0194-15bb-4a6c-8985-91b9e2dd10fb]: exited"}}
[debug] [2023-01-06T08:53:09.732Z] [worker-us-central1-updateTokenUser-fddf0194-15bb-4a6c-8985-91b9e2dd10fb]: FINISHED {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-fddf0194-15bb-4a6c-8985-91b9e2dd10fb]: FINISHED"}}
[debug] [2023-01-06T08:53:13.853Z] Jan 06, 2023 9:53:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:53:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:53:20.071Z] Jan 06, 2023 9:53:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:53:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:53:20.087Z] Jan 06, 2023 9:53:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:53:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:53:20.094Z] Jan 06, 2023 9:53:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:53:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:53:20.111Z] [work-queue] {"queuedWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:53:20.111Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-01-06T08:53:20.111Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0-2023-01-06T08:53:20.111Z"],"workRunningCount":1}
[debug] [2023-01-06T08:53:20.111Z] Accepted request POST /functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0 --> us-central1-updateTokenUser-0
[debug] [2023-01-06T08:53:20.114Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-01-06T08:53:20.114Z] [functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/functions/projects/dandelawebapp/triggers/us-central1-updateTokenUser-0, mapping to path=/functions/projects/"}}
[debug] [2023-01-06T08:53:20.114Z] [worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-updateTokenUser: 1 --> 0"}}
[debug] [2023-01-06T08:53:20.119Z] [worker-pool] addWorker(us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:53:20.119Z] [worker-pool] Adding worker with key us-central1-updateTokenUser, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-updateTokenUser, total=1"}}
[debug] [2023-01-06T08:53:20.673Z] [runtime-status] [2550] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:53:20.674Z] [runtime-status] [2550] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:53:20.674Z] [runtime-status] [2550] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-01-06T08:53:20.674Z] [runtime-status] [2550] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:53:20.776Z] [runtime-status] [2550] Checked functions.config() {"config":{}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] Checked functions.config() {\"config\":{}}"}}
[debug] [2023-01-06T08:53:20.776Z] [runtime-status] [2550] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-01-06T08:53:20.776Z] [runtime-status] [2550] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:53:20.777Z] [runtime-status] [2550] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-01-06T08:53:20.777Z] [runtime-status] [2550] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.1.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.1.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-01-06T08:53:20.778Z] [runtime-status] [2550] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.4.1","resolution":"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.4.1\",\"resolution\":\"/Users/couzmec/DANDELA/dandela-web-app/functions/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-01-06T08:53:20.779Z] [runtime-status] [2550] initializeApp(DEFAULT) {"storageBucket":"dandelawebapp.appspot.com","projectId":"dandelawebapp"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] initializeApp(DEFAULT) {\"storageBucket\":\"dandelawebapp.appspot.com\",\"projectId\":\"dandelawebapp\"}"}}
[debug] [2023-01-06T08:53:20.784Z] [runtime-status] [2550] Functions runtime initialized. {"cwd":"/Users/couzmec/DANDELA/dandela-web-app/functions","node_version":"16.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] Functions runtime initialized. {\"cwd\":\"/Users/couzmec/DANDELA/dandela-web-app/functions\",\"node_version\":\"16.17.1\"}"}}
[debug] [2023-01-06T08:53:20.784Z] [runtime-status] [2550] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_7f7618158ddbbad1.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] Listening to port: /var/folders/7c/_mj9t0s568q15qb8r1t76_k00000gn/T/fire_emu_7f7618158ddbbad1.sock"}}
[debug] [2023-01-06T08:53:20.830Z] [worker-us-central1-updateTokenUser-a56960d2-5178-47bb-8b0a-a6be070fd56f]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-a56960d2-5178-47bb-8b0a-a6be070fd56f]: IDLE"}}
[debug] [2023-01-06T08:53:20.830Z] [worker-pool] submitRequest(triggerId=us-central1-updateTokenUser) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-updateTokenUser)"}}
[debug] [2023-01-06T08:53:20.830Z] [worker-us-central1-updateTokenUser-a56960d2-5178-47bb-8b0a-a6be070fd56f]: BUSY {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-a56960d2-5178-47bb-8b0a-a6be070fd56f]: BUSY"}}
[info] i  functions: Beginning execution of "updateTokenUser" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Beginning execution of \"updateTokenUser\""}}
[debug] [2023-01-06T08:53:20.836Z] [runtime-status] [2550] ProcessBackground: lifting resource.name from resource {"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","service":"firestore.googleapis.com"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] ProcessBackground: lifting resource.name from resource {\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"service\":\"firestore.googleapis.com\"}"}}
[debug] [2023-01-06T08:53:20.836Z] [runtime-status] [2550] RunBackground {"data":{"value":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"},{"stringValue":"anvien"},{"stringValue":"merde"},{"stringValue":"mamamama"},{"stringValue":"mamaam"},{"stringValue":"fdpfdpfdasp"},{"stringValue":"putain sa marche ?"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:53:20.103591Z"},"oldValue":{"name":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr","fields":{"uid":{"stringValue":"BQNaPgprKcM0yDfVRetr"},"type":{"stringValue":"Employé Angola"},"tokens":{"arrayValue":{"values":[{"stringValue":"nouveau"},{"stringValue":"anvien"},{"stringValue":"merde"},{"stringValue":"mamamama"},{"stringValue":"mamaam"},{"stringValue":"fdpfdpfdasp"}]}}},"createTime":"2023-01-06T08:45:04.555873Z","updateTime":"2023-01-06T08:51:43.827800Z"},"updateMask":{}},"context":{"eventId":"bfb8e671-7a8b-4c21-9b11-39d5e8d4a6b5","timestamp":"2023-01-06T08:53:20.103Z","eventType":"providers/cloud.firestore/eventTypes/document.update","resource":"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"[runtime-status] [2550] RunBackground {\"data\":{\"value\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"},{\"stringValue\":\"anvien\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"mamamama\"},{\"stringValue\":\"mamaam\"},{\"stringValue\":\"fdpfdpfdasp\"},{\"stringValue\":\"putain sa marche ?\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:53:20.103591Z\"},\"oldValue\":{\"name\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\",\"fields\":{\"uid\":{\"stringValue\":\"BQNaPgprKcM0yDfVRetr\"},\"type\":{\"stringValue\":\"Employé Angola\"},\"tokens\":{\"arrayValue\":{\"values\":[{\"stringValue\":\"nouveau\"},{\"stringValue\":\"anvien\"},{\"stringValue\":\"merde\"},{\"stringValue\":\"mamamama\"},{\"stringValue\":\"mamaam\"},{\"stringValue\":\"fdpfdpfdasp\"}]}}},\"createTime\":\"2023-01-06T08:45:04.555873Z\",\"updateTime\":\"2023-01-06T08:51:43.827800Z\"},\"updateMask\":{}},\"context\":{\"eventId\":\"bfb8e671-7a8b-4c21-9b11-39d5e8d4a6b5\",\"timestamp\":\"2023-01-06T08:53:20.103Z\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.update\",\"resource\":\"projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr\"}}"}}
[debug] [2023-01-06T08:53:20.980Z] Jan 06, 2023 9:53:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:53:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: '7BDcCsXJCyVV6V5EXgE4', {"user":"  uid: '7BDcCsXJCyVV6V5EXgE4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: '7BDcCsXJCyVV6V5EXgE4',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'fjkldsnfjkldafnks', {"user":"    'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fjkldsnfjkldafnks',"}}
[info] >      'alalalalalala', {"user":"    'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalalalalala',"}}
[info] >      'meeeeerde', {"user":"    'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'meeeeerde',"}}
[info] >      'putain', {"user":"    'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain',"}}
[info] >      'ptetre cest bon', {"user":"    'ptetre cest bon',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ptetre cest bon',"}}
[info] >      'rohff' {"user":"    'rohff'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'rohff'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'UmoXhiY1e44fKq8YstxI', {"user":"  uid: 'UmoXhiY1e44fKq8YstxI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'UmoXhiY1e44fKq8YstxI',"}}
[info] >    type: 'Admin', {"user":"  type: 'Admin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Admin',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'alalal', {"user":"    'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'alalal',"}}
[info] >      'merde', {"user":"    'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'merde',"}}
[info] >      'ferland mendy', {"user":"    'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'ferland mendy',"}}
[info] >      'kbnueve', {"user":"    'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'kbnueve',"}}
[info] >      'camavinga', {"user":"    'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'camavinga',"}}
[info] >      'maes' {"user":"    'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'maes'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  Exist user { {"user":"Exist user {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m Exist user {"}}
[info] >    uid: 'BQNaPgprKcM0yDfVRetr', {"user":"  uid: 'BQNaPgprKcM0yDfVRetr',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   uid: 'BQNaPgprKcM0yDfVRetr',"}}
[info] >    type: 'Employé Angola', {"user":"  type: 'Employé Angola',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'Employé Angola',"}}
[info] >    tokens: [ {"user":"  tokens: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   tokens: ["}}
[info] >      'nouveau', {"user":"    'nouveau',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'nouveau',"}}
[info] >      'anvien', {"user":"    'anvien',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'anvien',"}}
[info] >      'merde', {"user":"    'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'merde',"}}
[info] >      'mamamama', {"user":"    'mamamama',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'mamamama',"}}
[info] >      'mamaam', {"user":"    'mamaam',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'mamaam',"}}
[info] >      'fdpfdpfdasp', {"user":"    'fdpfdpfdasp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'fdpfdpfdasp',"}}
[info] >      'putain sa marche ?' {"user":"    'putain sa marche ?'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     'putain sa marche ?'"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  CONTXT { {"user":"CONTXT {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m CONTXT {"}}
[info] >    eventId: 'bfb8e671-7a8b-4c21-9b11-39d5e8d4a6b5', {"user":"  eventId: 'bfb8e671-7a8b-4c21-9b11-39d5e8d4a6b5',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   eventId: 'bfb8e671-7a8b-4c21-9b11-39d5e8d4a6b5',"}}
[info] >    timestamp: '2023-01-06T08:53:20.103Z', {"user":"  timestamp: '2023-01-06T08:53:20.103Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2023-01-06T08:53:20.103Z',"}}
[info] >    eventType: 'google.firestore.document.update', {"user":"  eventType: 'google.firestore.document.update',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   eventType: 'google.firestore.document.update',"}}
[info] >    resource: { {"user":"  resource: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   resource: {"}}
[info] >      service: 'firestore.googleapis.com', {"user":"    service: 'firestore.googleapis.com',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     service: 'firestore.googleapis.com',"}}
[info] >      name: 'projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr' {"user":"    name: 'projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m     name: 'projects/dandelawebapp/databases/(default)/documents/USER/BQNaPgprKcM0yDfVRetr'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    params: { userId: 'BQNaPgprKcM0yDfVRetr' } {"user":"  params: { userId: 'BQNaPgprKcM0yDfVRetr' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   params: { userId: 'BQNaPgprKcM0yDfVRetr' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  TOKENS Admin [ {"user":"TOKENS Admin [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m TOKENS Admin ["}}
[info] >    'fjkldsnfjkldafnks', {"user":"  'fjkldsnfjkldafnks',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'fjkldsnfjkldafnks',"}}
[info] >    'alalalalalala', {"user":"  'alalalalalala',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'alalalalalala',"}}
[info] >    'meeeeerde', {"user":"  'meeeeerde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'meeeeerde',"}}
[info] >    'putain', {"user":"  'putain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'putain',"}}
[info] >    'ptetre cest bon', {"user":"  'ptetre cest bon',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'ptetre cest bon',"}}
[info] >    'rohff', {"user":"  'rohff',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'rohff',"}}
[info] >    'alalal', {"user":"  'alalal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'alalal',"}}
[info] >    'merde', {"user":"  'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'merde',"}}
[info] >    'ferland mendy', {"user":"  'ferland mendy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'ferland mendy',"}}
[info] >    'kbnueve', {"user":"  'kbnueve',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'kbnueve',"}}
[info] >    'camavinga', {"user":"  'camavinga',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'camavinga',"}}
[info] >    'maes' {"user":"  'maes'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'maes'"}}
[info] >  ] 12 {"user":"] 12","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m ] 12"}}
[info] >  TOKENS Angola [ {"user":"TOKENS Angola [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m TOKENS Angola ["}}
[info] >    'nouveau', {"user":"  'nouveau',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'nouveau',"}}
[info] >    'anvien', {"user":"  'anvien',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'anvien',"}}
[info] >    'merde', {"user":"  'merde',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'merde',"}}
[info] >    'mamamama', {"user":"  'mamamama',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'mamamama',"}}
[info] >    'mamaam', {"user":"  'mamaam',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'mamaam',"}}
[info] >    'fdpfdpfdasp', {"user":"  'fdpfdpfdasp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'fdpfdpfdasp',"}}
[info] >    'putain sa marche ?' {"user":"  'putain sa marche ?'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m   'putain sa marche ?'"}}
[info] >  ] 7 {"user":"] 7","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"\u001b[90m> \u001b[39m ] 7"}}
[debug] [2023-01-06T08:53:20.995Z] [worker-us-central1-updateTokenUser-a56960d2-5178-47bb-8b0a-a6be070fd56f]: IDLE {"metadata":{"emulator":{"name":"functions"},"message":"[worker-us-central1-updateTokenUser-a56960d2-5178-47bb-8b0a-a6be070fd56f]: IDLE"}}
[debug] [2023-01-06T08:53:20.995Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] i  functions: Finished "updateTokenUser" in 155.604208ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-updateTokenUser"},"extension":{},"message":"Finished \"updateTokenUser\" in 155.604208ms"}}
[debug] [2023-01-06T08:54:20.141Z] Jan 06, 2023 9:54:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Jan 06, 2023 9:54:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:54:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nJan 06, 2023 9:54:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:54:20.651Z] Jan 06, 2023 9:54:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:54:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:54:20.656Z] Jan 06, 2023 9:54:20 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:54:20 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreWriteHandler onClose\nINFO: channel closed\n"}}
[debug] [2023-01-06T08:55:20.164Z] Jan 06, 2023 9:55:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:55:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:56:20.191Z] Jan 06, 2023 9:56:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:56:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:57:20.217Z] Jan 06, 2023 9:57:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:57:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:58:20.249Z] Jan 06, 2023 9:58:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:58:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T08:59:20.292Z] Jan 06, 2023 9:59:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:59:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:00:20.336Z] Jan 06, 2023 10:00:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:00:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:01:20.367Z] Jan 06, 2023 10:01:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:01:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:02:20.406Z] Jan 06, 2023 10:02:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:02:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:03:47.947Z] Jan 06, 2023 10:03:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:03:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:04:47.970Z] Jan 06, 2023 10:04:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:04:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:05:47.987Z] Jan 06, 2023 10:05:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:05:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:06:48.026Z] Jan 06, 2023 10:06:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:06:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:07:48.050Z] Jan 06, 2023 10:07:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:07:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:08:48.075Z] Jan 06, 2023 10:08:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:08:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:09:48.111Z] Jan 06, 2023 10:09:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:09:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:10:48.141Z] Jan 06, 2023 10:10:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:10:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:11:48.175Z] Jan 06, 2023 10:11:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:11:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:12:48.208Z] Jan 06, 2023 10:12:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:12:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:13:48.254Z] Jan 06, 2023 10:13:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:13:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:14:48.289Z] Jan 06, 2023 10:14:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:14:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:15:48.327Z] Jan 06, 2023 10:15:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:15:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:16:48.363Z] Jan 06, 2023 10:16:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:16:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:17:48.405Z] Jan 06, 2023 10:17:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:17:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:18:48.452Z] Jan 06, 2023 10:18:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:18:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:19:48.491Z] Jan 06, 2023 10:19:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:19:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:20:48.521Z] Jan 06, 2023 10:20:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:20:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:21:48.568Z] Jan 06, 2023 10:21:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:21:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:22:48.605Z] Jan 06, 2023 10:22:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:22:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:23:48.633Z] Jan 06, 2023 10:23:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:23:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:24:48.656Z] Jan 06, 2023 10:24:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:24:48 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:25:35.019Z] Jan 06, 2023 10:25:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:25:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:26:35.050Z] Jan 06, 2023 10:26:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:26:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:27:35.086Z] Jan 06, 2023 10:27:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:27:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:28:35.122Z] Jan 06, 2023 10:28:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:28:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:29:35.158Z] Jan 06, 2023 10:29:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:29:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:30:35.181Z] Jan 06, 2023 10:30:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:30:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:31:35.216Z] Jan 06, 2023 10:31:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:31:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:32:35.252Z] Jan 06, 2023 10:32:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:32:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:33:35.287Z] Jan 06, 2023 10:33:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:33:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:34:35.326Z] Jan 06, 2023 10:34:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:34:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:35:35.349Z] Jan 06, 2023 10:35:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:35:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:36:35.384Z] Jan 06, 2023 10:36:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:36:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:37:35.415Z] Jan 06, 2023 10:37:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:37:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:38:35.445Z] Jan 06, 2023 10:38:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:38:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:39:35.468Z] Jan 06, 2023 10:39:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:39:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:40:35.489Z] Jan 06, 2023 10:40:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:40:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:41:35.504Z] Jan 06, 2023 10:41:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:41:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:42:35.544Z] Jan 06, 2023 10:42:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:42:35 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:43:51.721Z] Jan 06, 2023 10:43:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:43:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:44:51.749Z] Jan 06, 2023 10:44:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:44:51 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:46:07.612Z] Jan 06, 2023 10:46:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:46:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:47:07.640Z] Jan 06, 2023 10:47:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:47:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:48:07.687Z] Jan 06, 2023 10:48:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:48:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:49:07.721Z] Jan 06, 2023 10:49:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:49:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:50:07.760Z] Jan 06, 2023 10:50:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:50:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:51:07.799Z] Jan 06, 2023 10:51:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:51:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:52:07.840Z] Jan 06, 2023 10:52:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:52:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:53:07.882Z] Jan 06, 2023 10:53:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:53:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:54:07.931Z] Jan 06, 2023 10:54:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:54:07 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:55:08.006Z] Jan 06, 2023 10:55:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:55:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:56:08.036Z] Jan 06, 2023 10:56:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:56:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:57:08.078Z] Jan 06, 2023 10:57:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:57:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:58:08.109Z] Jan 06, 2023 10:58:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:58:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T09:59:08.145Z] Jan 06, 2023 10:59:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 10:59:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:00:08.195Z] Jan 06, 2023 11:00:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:00:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:01:08.233Z] Jan 06, 2023 11:01:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:01:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:02:08.286Z] Jan 06, 2023 11:02:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:02:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:03:08.345Z] Jan 06, 2023 11:03:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:03:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:03:44.316Z] Jan 06, 2023 11:03:44 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
Jan 06, 2023 11:03:44 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:03:44 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\nJan 06, 2023 11:03:44 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\n"}}
[debug] [2023-01-06T10:03:44.354Z] Jan 06, 2023 11:03:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:03:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:03:53.442Z] Jan 06, 2023 11:03:53 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
Jan 06, 2023 11:03:53 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:03:53 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\nJan 06, 2023 11:03:53 AM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2023-01-06T10:06:53.059Z] Jan 06, 2023 11:06:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:06:53 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:06:56.243Z] Jan 06, 2023 11:06:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:06:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:06:56.254Z] Jan 06, 2023 11:06:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:06:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:06:56.263Z] Jan 06, 2023 11:06:56 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:06:56 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2023-01-06T10:06:56.296Z] Jan 06, 2023 11:06:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:06:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:07:56.339Z] Jan 06, 2023 11:07:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:07:56 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:14:39.727Z] Jan 06, 2023 11:14:39 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Jan 06, 2023 11:14:39 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:14:39 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nJan 06, 2023 11:14:39 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:14:39.734Z] Jan 06, 2023 11:14:39 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:14:39 AM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2023-01-06T10:14:39.765Z] Jan 06, 2023 11:14:39 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:14:39 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T10:47:42.380Z] Jan 06, 2023 11:47:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:47:42 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T11:37:05.456Z] Jan 06, 2023 12:37:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 12:37:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T12:42:24.693Z] Jan 06, 2023 1:42:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 1:42:24 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T14:02:47.853Z] Jan 06, 2023 3:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 3:02:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T15:08:25.976Z] Jan 06, 2023 4:08:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 4:08:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T16:13:51.148Z] Jan 06, 2023 5:13:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 5:13:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T17:38:16.364Z] Jan 06, 2023 6:38:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 6:38:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T18:34:37.159Z] Jan 06, 2023 7:34:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 7:34:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T19:39:48.335Z] Jan 06, 2023 8:39:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 8:39:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T20:47:32.186Z] Jan 06, 2023 9:47:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 9:47:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T22:09:25.366Z] Jan 06, 2023 11:09:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 06, 2023 11:09:25 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-06T23:10:09.113Z] Jan 07, 2023 12:10:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 12:10:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T00:13:13.300Z] Jan 07, 2023 1:13:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 1:13:13 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T01:35:08.490Z] Jan 07, 2023 2:35:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 2:35:08 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T02:29:50.599Z] Jan 07, 2023 3:29:50 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 3:29:50 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T03:32:38.368Z] Jan 07, 2023 4:32:38 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 4:32:38 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T04:39:41.619Z] Jan 07, 2023 5:39:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 5:39:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T06:00:47.706Z] Jan 07, 2023 7:00:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:00:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T07:07:54.832Z] Jan 07, 2023 8:07:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:07:54 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T08:17:34.943Z] Jan 07, 2023 9:17:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 9:17:34 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T09:23:20.948Z] Jan 07, 2023 10:23:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 10:23:20 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T10:21:44.073Z] Jan 07, 2023 11:21:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 11:21:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T11:30:16.924Z] Jan 07, 2023 12:30:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 12:30:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T12:35:47.088Z] Jan 07, 2023 1:35:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 1:35:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T13:43:38.279Z] Jan 07, 2023 2:43:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 2:43:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T15:07:06.997Z] Jan 07, 2023 4:07:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 4:07:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T16:11:51.123Z] Jan 07, 2023 5:11:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 5:11:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T17:19:43.950Z] Jan 07, 2023 6:19:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 6:19:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:26:55.112Z] Jan 07, 2023 7:26:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:26:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:35:15.164Z] Jan 07, 2023 7:35:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:35:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:36:15.235Z] Jan 07, 2023 7:36:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:36:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:37:15.280Z] Jan 07, 2023 7:37:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:37:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:38:15.336Z] Jan 07, 2023 7:38:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:38:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:39:15.384Z] Jan 07, 2023 7:39:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:39:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:40:15.435Z] Jan 07, 2023 7:40:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:40:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:41:15.477Z] Jan 07, 2023 7:41:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:41:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:42:15.539Z] Jan 07, 2023 7:42:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:42:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:43:15.594Z] Jan 07, 2023 7:43:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:43:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:44:15.651Z] Jan 07, 2023 7:44:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:44:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:45:15.702Z] Jan 07, 2023 7:45:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:45:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:46:15.745Z] Jan 07, 2023 7:46:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:46:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:47:15.783Z] Jan 07, 2023 7:47:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:47:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:48:15.837Z] Jan 07, 2023 7:48:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:48:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:49:15.918Z] Jan 07, 2023 7:49:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:49:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:50:15.991Z] Jan 07, 2023 7:50:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:50:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:51:16.040Z] Jan 07, 2023 7:51:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:51:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:52:16.085Z] Jan 07, 2023 7:52:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:52:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:53:16.134Z] Jan 07, 2023 7:53:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:53:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:54:16.178Z] Jan 07, 2023 7:54:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:54:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:55:16.232Z] Jan 07, 2023 7:55:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:55:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:56:16.295Z] Jan 07, 2023 7:56:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:56:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:57:16.343Z] Jan 07, 2023 7:57:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:57:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:58:16.368Z] Jan 07, 2023 7:58:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:58:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T18:59:16.409Z] Jan 07, 2023 7:59:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 7:59:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:00:16.477Z] Jan 07, 2023 8:00:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:00:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:01:16.523Z] Jan 07, 2023 8:01:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:01:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:02:16.560Z] Jan 07, 2023 8:02:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:02:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:03:16.587Z] Jan 07, 2023 8:03:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:03:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:04:16.629Z] Jan 07, 2023 8:04:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:04:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:05:16.689Z] Jan 07, 2023 8:05:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:05:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:06:16.721Z] Jan 07, 2023 8:06:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:06:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:07:16.764Z] Jan 07, 2023 8:07:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:07:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:08:16.822Z] Jan 07, 2023 8:08:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:08:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:09:16.868Z] Jan 07, 2023 8:09:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:09:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:10:16.919Z] Jan 07, 2023 8:10:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:10:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:11:16.974Z] Jan 07, 2023 8:11:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:11:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:12:17.009Z] Jan 07, 2023 8:12:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:12:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:13:17.055Z] Jan 07, 2023 8:13:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:13:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-01-07T19:14:17.098Z] Jan 07, 2023 8:14:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jan 07, 2023 8:14:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
